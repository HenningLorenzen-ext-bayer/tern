length(x_cell) * c(1, 1 / denom)
} else {
rcell("-", format = "xx")
}
},
format = "xx (xx.xx%)",
col_wise_args = list(denom = denom)
)
x
nrow(col_by) == length(x)
nrow(col_by)
length(x)
x
t_summary(iris$Species, iris$Species)
length(x)
debugonce(rtabulate.factor)
debugonce(rtables::rtabulate.factor)
debugonce(rtables:::rtabulate.factor)
t_summary(iris$Species, iris$Species)
length(x)
t_summary(iris$Species, iris$Species)
debugonce(rtables:::rtabulate.factor)
length(as.data.frame(x))
t_summary(iris$Species, iris$Species)
x
class(x)
t_summary(iris$Species, iris$Species)
remove.packages("rtables")
install.packages("../rtables/", repos = NULL, type="source")
t_summary(iris$Species, iris$Species)
devtools::load_all(".")
t_summary(iris$Species, iris$Species)
devtools::load_all(".")
t_summary(iris$Species, iris$Species)
library(random.cdisc.data)
ADSL <- cadsl
t_summary(ADSL$SEX, ADSL$ARM, total = "All")
t_summary(ADSL$SEX, ADSL$ARM, total = "All")
col_by
ncol(col_by)
length(col_N)
remove.packages("rtables")
install.packages("../rtables/", repos = NULL, type="source")
devtools::load_all(".")
devtools::load_all(".")
?gsubfn
??gsubfn
#'
#' library(random.cdisc.data)
#' ADSL <- cadsl
#'
#' t_summary(ADSL$SEX, ADSL$ARM, total = "All")
#' t_summary(ADSL$SEX, ADSL$ARM, useNA = "always")
#'
#' ADSL$SEX[1:10] <- NA
#' t_summary(ADSL$SEX, ADSL$ARM, denominator = "N", useNA = "ifany", total = "All")
#' t_summary(ADSL$SEX, ADSL$ARM, denominator = "n", useNA = "no", total = "All")
default_col_N <- function(x, col_by) {
stopifnot(is.data.frame(col_by))
colSums(x)
}
devtools::load_all(".")
t_summary(iris$Species, iris$Species)
devtools::load_all(".")
t_summary(iris$Species, iris$Species)
x
devtools::load_all(".")
t_summary(iris$Species, iris$Species)
colSums(col_by)
devtools::load_all(".")
t_summary(iris$Species, iris$Species)
library(random.cdisc.data)
ADSL <- cadsl
t_summary(ADSL$SEX, ADSL$ARM, total = "All")
t_summary(ADSL$SEX, ADSL$ARM, useNA = "always")
lapply(col_by, function(rows) {
sum(is.na(rows[col_by]))
})
t_summary(ADSL$SEX, ADSL$ARM, useNA = "always")
lapply(col_by, function(rows) {
sum(is.na(x[rows]))
})
devtools::load_all(".")
t_summary(ADSL$SEX, ADSL$ARM, useNA = "always")
ADSL$SEX[1:10] <- NA
t_summary(ADSL$SEX, ADSL$ARM, denominator = "N", useNA = "ifany", total = "All")
devtools::load_all(".")
t_summary(ADSL$SEX, ADSL$ARM, denominator = "N", useNA = "ifany", total = "All")
t_summary(ADSL$SEX, ADSL$ARM, denominator = "n", useNA = "no", total = "All")
devtools::document()
devtools::load_all(".")
devtools::load_all(".")
t_summary(
x = c(TRUE,FALSE,NA,TRUE,FALSE,FALSE,FALSE,TRUE),
col_by = factor(LETTERS[c(1,1,1,2,2,3,3,2)])
)
devtools::load_all(".")
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM, total = "All Patients")
t_summary(iris$Sepal.Length, iris$Species)
library(random.cdisc.data)
library(dplyr)
library(rtables)
ADSL <- radsl(N = 100, seed = 1)
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
ADSL <- var_relabel(ADSL, AGE = "Baseline Age of patient")
# control categorical order
ADSL$SEX <- relevel(ADSL$SEX, "M", "F")
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM, total = "All Patients")
name
devtools::load_all(".")
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM, total = "All Patients")
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
devtools::load_all(".")
t_summary(iris$Sepal.Length, iris$Species)
library(random.cdisc.data)
library(dplyr)
library(rtables)
ADSL <- radsl(N = 100, seed = 1)
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
ADSL <- var_relabel(ADSL, AGE = "Baseline Age of patient")
# control categorical order
ADSL$SEX <- relevel(ADSL$SEX, "M", "F")
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM, total = "All Patients")
remove.packages("rtables")
install.packages("../rtables/", repos = NULL, type="source")
library(tern)
remove.packages("tern")
devtools::load_all(".")
t_summary(structure(1:5, class = "aaa"), factor(LETTERS[c(1,2,1,1,2)]))
t_summary(iris$Sepal.Length, iris$Species)
library(random.cdisc.data)
library(dplyr)
library(rtables)
ADSL <- radsl(N = 100, seed = 1)
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
devtools::load_all(".")
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
ADSL[, c("SEX", "AGE")]
devtools::load_all(".")
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
Map(function(col, node_name) {
node(
name = node_name,
content = t_summary(x = col, col_by = col_by, col_N = col_N, ...),
children = list()
)
}, x, var_labels(x, fill = TRUE))
res <- node(name = invisible_node_name("root"),
content = NULL,
children = children
)
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
Map(function(col, node_name) {
node(
name = node_name,
content = t_summary(x = col, col_by = col_by, col_N = col_N, ...),
children = list()
)
}, x, var_labels(x, fill = TRUE))
table_tree
debugonce(to_rtable)
debugonce(to_rtable.node)
devtools::load_all(".")
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
debugonce(to_rtable, signature = "node")
tbls
tbls
gap <- 1
stopifnot(is.null(x@content) || is(x@content, "rtable"))
tbls <- c(list(x@content), lapply(x@children, to_rtable))
tbls
list(x@content
)
x@content
x@children
list(x@content)
lapply(x@children, to_rtable)
x@children
devtools::load_all(".")
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
devtools::load_all(".")
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
tbls
tbls
x@children
tbls
x@name
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
devtools::load_all(".")
devtools::load_all(".")
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
devtools::load_all(".")
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
t_summary(iris$Sepal.Length, iris$Species)
library(random.cdisc.data)
library(dplyr)
library(rtables)
ADSL <- radsl(N = 100, seed = 1)
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
ADSL <- cadsl # radsl(N = 100, seed = 1)
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
# control the label
ADSL <- var_relabel(ADSL, AGE = "Baseline Age of patient")
# control categorical order
ADSL$SEX <- relevel(ADSL$SEX, "M", "F")
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM, total = "All Patients")
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM, total = "All Patients", useNA = 'always')
ADSL$SEX[1:10] <- NA
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM, total = "All Patients", useNA = 'ifany')
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM, total = "All Patients", denominator = "N",
useNA = 'ifany')
ADSL_AGE65 <- ADSL %>%
dplyr::filter(AGE > 65)
t_summary(ADSL_AGE65[, c("AGE", "SEX")], ADSL_AGE65$ARM, total = "All Patients",
col_N = table(ADSL_AGE65$ARM), denominator = "N", drop_levels = TRUE)
devtools::load_all(".")
t_summary(structure(1:5, class = "aaa"), factor(LETTERS[c(1,2,1,1,2)]))
t_summary(iris$Sepal.Length, iris$Species)
library(random.cdisc.data)
library(dplyr)
library(rtables)
ADSL <- cadsl # radsl(N = 100, seed = 1)
t_summary(ADSL[, c("SEX", "AGE")], col_by  = by_all("All"), col_N = nrow(ADSL))
by_all("All")
by_all
ADSL[,]
ADSL[, c()]
ADSL[c(), c()]
ADSL
hello <- c()
ADSL[, hello]
rlang::last_error()
remove.packages("rtables")
install.packages("../rtables/", repos = NULL, type="source")
devtools::load_all(".")
t_summary(iris$Sepal.Length, iris$Species)
library(random.cdisc.data)
library(dplyr)
library(rtables)
ADSL <- cadsl # radsl(N = 100, seed = 1)
t_summary(ADSL[, c("SEX", "AGE")], col_by = by_all("All", n = nrow(ADSL)), col_N = nrow(ADSL))
by_all("All", n = nrow(ADSL))
remove.packages("rtables")
install.packages("../rtables/", repos = NULL, type="source")
remove.packages("rtables")
install.packages("../rtables/", repos = NULL, type="source")
remove.packages("rtables")
install.packages("../rtables/", repos = NULL, type="source")
devtools::load_all(".")
t_summary(structure(1:5, class = "aaa"), factor(LETTERS[c(1,2,1,1,2)]))
t_summary(iris$Sepal.Length, iris$Species)
library(random.cdisc.data)
library(dplyr)
library(rtables)
ADSL <- cadsl # radsl(N = 100, seed = 1)
t_summary(ADSL[, c("SEX", "AGE")], col_by = by_all("All", n = nrow(ADSL)), col_N = nrow(ADSL))
# control the label
ADSL <- var_relabel(ADSL, AGE = "Baseline Age of patient")
# control categorical order
ADSL$SEX <- relevel(ADSL$SEX, "M", "F")
t_summary(ADSL[, c("SEX", "AGE")], col_by = by_all("All"), col_N = nrow(ADSL))
# control the label
ADSL <- var_relabel(ADSL, AGE = "Baseline Age of patient")
# control categorical order
ADSL$SEX <- relevel(ADSL$SEX, "M", "F")
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM, total = "All Patients")
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM, total = "All Patients", useNA = 'always')
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM %>% by_add_total("All Patients"))
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM %>% by_add_total("All Patients", useNA = 'always'))
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM %>% by_add_total("All Patients"), useNA = 'always')
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM %>% by_add_total("All Patients"), useNA = 'always')
ADSL$SEX[1:10] <- NA
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM %>% by_add_total("All Patients"), useNA = 'ifany')
t_summary(ADSL[, c("SEX", "AGE")], col_by = ADSL$ARM %>% by_add_total("All Patients"), denominator = "N",
useNA = 'ifany')
ADSL_AGE65 <- ADSL %>%
dplyr::filter(AGE > 65)
t_summary(ADSL_AGE65[, c("AGE", "SEX")], ADSL_AGE65$ARM, total = "All Patients",
col_N = table(ADSL_AGE65$ARM), denominator = "N", drop_levels = TRUE)
t_summary(ADSL_AGE65[, c("AGE", "SEX")], col_by = ADSL_AGE65$ARM %>% by_add_total("All Patients"),
col_N = table(ADSL_AGE65$ARM), denominator = "N", drop_levels = TRUE)
ADSL_AGE65$ARM
t_summary(ADSL_AGE65[, c("AGE", "SEX")], col_by = ADSL_AGE65$ARM %>% by_add_total("All Patients"),
col_N = get_N(col_by), denominator = "N", drop_levels = TRUE)
t_summary(ADSL_AGE65[, c("AGE", "SEX")], col_by = ADSL_AGE65$ARM %>% by_add_total("All Patients"),
col_N = get_N(col_by), denominator = "N", drop_levels = TRUE)
col_N <- get_N(col_by_to_matrix(ADSL_AGE65$ARM %>% by_add_total("All Patients")))
t_summary(ADSL_AGE65[, c("AGE", "SEX")], col_by = ADSL_AGE65$ARM %>% by_add_total("All Patients"),
col_N = col_N, denominator = "N", drop_levels = TRUE)
col_by <- ADSL_AGE65$ARM %>% by_add_total("All Patients")
col_N <- get_N(col_by_to_matrix(col_by))
t_summary(ADSL_AGE65[, c("AGE", "SEX")], col_by = col_by,
col_N = col_N, denominator = "N", drop_levels = TRUE)
table(ADSL$ARM)
sum(col_N)
col_N <- table(ADSL$ARM)
sum(col_N)
t_summary(ADSL_AGE65[, c("AGE", "SEX")], col_by = ADSL_AGE65$ARM %>% by_add_total("All Patients"),
col_N = c(col_N, sum(col_N)), denominator = "N", drop_levels = TRUE)
col_N <- c(col_N, `All Patients` = sum(col_N))
t_summary(ADSL_AGE65[, c("AGE", "SEX")], col_by = ADSL_AGE65$ARM %>% by_add_total("All Patients"),
col_N = col_N, denominator = "N", drop_levels = TRUE)
devtools::load_all(".")
today <- Sys.Date()
tenweeks <- seq(today, length.out=10, by="1 week")
t_summary(tenweeks, no_by("all"), length(tenweeks))
function (x)
t_summary(tenweeks, by_all("all"), length(tenweeks))
tenweeks
devtools::load_all(".")
today <- Sys.Date()
tenweeks <- seq(today, length.out=10, by="1 week")
tenweeks
_
t_summary(tenweeks, by_all("all"), length(tenweeks))
devtools::load_all(".")
t_summary(tenweeks, by_all("all"), length(tenweeks))
devtools::load_all(".")
t_summary(tenweeks, by_all("all"), length(tenweeks))
x
devtools::load_all(".")
t_summary(tenweeks, by_all("all"), length(tenweeks))
t_summary(tenweeks, factor(LETTERS[c(1,1,1,2,2,3,3,3,4,4)]))
t_summary(tenweeks, col_by = factor(LETTERS[c(1,1,1,2,2,3,3,3,4,4)]) %>% by_add_total("All"))
factor(LETTERS[c(1,1,1,2,2,3,3,3,4,4)]) %>% by_add_total("All")
t_summary(iris$Sepal.Length, iris$Species)
library(random.cdisc.data)
library(rtables)
ADSL <- radsl(N = 100, seed = 1)
t_summary(ADSL$AGE, ADSL$ARM)
t_summary(ADSL$AGE, col_by = add_total_by(factor_to_matrix_by(ADSL$ARM), label = "All"))
t_summary(ADSL$AGE, col_by = ADSL$ARM %>% by_add_total("All"))
t_summary(ADSL$AGE, col_by = by_add_total(factor_to_matrix_by(ADSL$ARM), label = "All"))
t_summary(ADSL$AGE, col_by = by_add_total(by_factor_to_matrix(ADSL$ARM), label = "All"))
t_summary(ADSL$AGE, col_by = ADSL$ARM %>% by_add_total("All"))
ADSL$AGE[1:10] <- NA
t_summary(ADSL$AGE, by_all("All"), col_N = nrow(ADSL) )
devtools::load_all(".")
t_summary(iris$Species, iris$Species)
library(random.cdisc.data)
ADSL <- cadsl
t_summary(ADSL$SEX, ADSL$ARM, total = "All")
t_summary(ADSL$SEX, ADSL$ARM, useNA = "always")
ADSL$SEX[1:10] <- NA
t_summary(ADSL$SEX, ADSL$ARM, denominator = "N", useNA = "ifany", total = "All")
t_summary(ADSL$SEX, ADSL$ARM %>% by_add_total("All"), denominator = "N", useNA = "ifany")
t_summary(ADSL$SEX, ADSL$ARM %>% by_add_total("All"), denominator = "n", useNA = "no")
with(ADSL, t_summary(AGE > 65, ARM, useNA = "ifany"))
with(ADSL, t_summary(AGE > 65, ARM %>% by_add_total("All"), denominator = "N", useNA = "ifany",
row.name.TRUE = "Baseline Age > 65", row.name.FALSE = "Baseline Age <= 65"))
t_summary(
x = c(TRUE,FALSE,NA,TRUE,FALSE,FALSE,FALSE,TRUE),
col_by = factor(LETTERS[c(1,1,1,2,2,3,3,2)])
)
library(random.cdisc.data)
ADSL <- cadsl
ADSL$AGE[1:10] <- NA
with(ADSL, t_summary(AGE > 65, ARM, useNA = "ifany"))
with(ADSL, t_summary(AGE > 65, ARM %>% by_add_total("All"), denominator = "N", useNA = "ifany",
row.name.TRUE = "Baseline Age > 65", row.name.FALSE = "Baseline Age <= 65"))
t_summary(iris$Species, iris$Species)
library(random.cdisc.data)
ADSL <- cadsl
t_summary(ADSL$SEX, ADSL$ARM %>% by_add_total("All"))
devtools::load_all(".")
library(dplyr)
library(random.cdisc.data)
ADSL <- radsl(N = 30, seed = 1)
t_summary_by(
x = ADSL$SEX,
row_by = ADSL$COUNTRY,
col_by = ADSL$ARMCD,
col_N = table(ADSL$ARMCD),
total = "All Patients",
drop_levels = TRUE
)
col_by
devtools::load_all(".")
t_summary_by(
x = ADSL$SEX,
row_by = ADSL$COUNTRY,
col_by = ADSL$ARMCD,
col_N = table(ADSL$ARMCD),
total = "All Patients",
drop_levels = TRUE
)
col_by_to_matrix(row_by, x)
row_by
devtools::load_all(".")
t_summary_by(
x = ADSL$SEX,
row_by = ADSL$COUNTRY,
col_by = ADSL$ARMCD,
col_N = table(ADSL$ARMCD),
total = "All Patients",
drop_levels = TRUE
)
devtools::load_all(".")
t_summary_by(
x = ADSL$SEX,
row_by = ADSL$COUNTRY,
col_by = ADSL$ARMCD,
col_N = table(ADSL$ARMCD),
total = "All Patients",
drop_levels = TRUE
)
lapply(row_by, function(rows) x[rows, ])
devtools::load_all(".")
t_summary_by(
x = ADSL$SEX,
row_by = ADSL$COUNTRY,
col_by = ADSL$ARMCD,
col_N = table(ADSL$ARMCD),
total = "All Patients",
drop_levels = TRUE
)
lapply(row_by, function(rows) x[rows])
res2 <- lapply(row_by, function(rows) x[rows])
length(row_by)
row_by
x
x[row_by[[1]]]
lapply(row_by, function(rows) x[rows])
t_summary.list(
x = lapply(row_by, function(rows) x[rows]),
col_by = col_by,
col_N = col_N,
...,
table_tree = table_tree
)
t_summary_by(
x = ADSL$SEX,
row_by = ADSL$COUNTRY,
col_by = ADSL$ARMCD,
col_N = table(ADSL$ARMCD),
total = "All Patients",
drop_levels = TRUE
)
row_by
devtools::load_all(".")
t_summary_by(
x = ADSL$SEX,
row_by = ADSL$COUNTRY,
col_by = ADSL$ARMCD,
col_N = table(ADSL$ARMCD),
total = "All Patients",
drop_levels = TRUE
)
x
col_by
x
length(x)
devtools::load_all(".")
table(ADSL$ARMCD)
devtools::load_all(".")
library(dplyr)
library(random.cdisc.data)
ADSL <- radsl(N = 30, seed = 1)
t_summary_by(
x = ADSL$SEX,
row_by = ADSL$COUNTRY,
col_by = ADSL$ARMCD,
col_N = table(ADSL$ARMCD),
total = "All Patients",
drop_levels = TRUE
)
devtools::load_all(".")
t_summary(iris$Sepal.Length, iris$Species)
library(random.cdisc.data)
library(dplyr)
library(rtables)
ADSL <- cadsl # radsl(N = 100, seed = 1)
t_summary(ADSL[, c("SEX", "AGE")], col_by = by_all("All"), col_N = nrow(ADSL))
debugonce(to_rtable)
t_summary(ADSL[, c("SEX", "AGE")], col_by = by_all("All"), col_N = nrow(ADSL))
debugonce(to_rtable, signature = "node")
devtools::load_all(".")
debugonce(to_rtable, signature = "node")
library(random.cdisc.data)
library(dplyr)
library(rtables)
ADSL <- cadsl # radsl(N = 100, seed = 1)
t_summary(ADSL[, c("SEX", "AGE")], col_by = by_all("All"), col_N = nrow(ADSL))
??rbindl_rtables
rtables::rbindl_rtables
debugonce(rbindl_rtables)
t_summary(ADSL[, c("SEX", "AGE")], col_by = by_all("All"), col_N = nrow(ADSL))
x
header(x[[1]])
header(x[[2]])
devtools::load_all(".")
t_summary(ADSL[, c("SEX", "AGE")], col_by = by_all("All"), col_N = nrow(ADSL))
trace(rbindl_rtables, edit = T)
t_summary(ADSL[, c("SEX", "AGE")], col_by = by_all("All"), col_N = nrow(ADSL))
trace(rbindl_rtables, edit = T)
t_summary(ADSL[, c("SEX", "AGE")], col_by = by_all("All"), col_N = nrow(ADSL))
trace(rbindl_rtables, edit = T)
devtools::load_all(".")
devtools::load_all(".")
trace(rbindl_rtables, edit = T)
library(random.cdisc.data)
library(dplyr)
library(rtables)
ADSL <- cadsl # radsl(N = 100, seed = 1)
t_summary(ADSL[, c("SEX", "AGE")], col_by = by_all("All"), col_N = nrow(ADSL))
trace(rbindl_rtables, edit = T)
debugonce(rbindl_rtables)
t_summary(ADSL[, c("SEX", "AGE")], col_by = by_all("All"), col_N = nrow(ADSL))
devtools::load_all(".")
debugonce(rbindl_rtables)
t_summary(ADSL[, c("SEX", "AGE")], col_by = by_all("All"), col_N = nrow(ADSL))
debugonce(rbindl_rtables)
