---
title: "Missing Data"
author: "Adrian Waddell"
date: "2019-07-31"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```


This document summarizes our decisions regarding working with missing data in
`tern`.

```{r, message=FALSE}
library(tern)
```

# `col_by`

Missing values in factor variables assigned to the `col_by` arguments will cause an error.

```{r, error=TRUE}
t_summary(1:3, col_by = factor(c(NA, "a", "b")))
```

You can use the `addNA` function to convert the NAs to a new level:

```{r}
t_summary(1:3, col_by = na_as_level(factor(c(NA, "a", "b"))))
```

There are more ways to re-code `NAs` in factor variables as described in this
[`stackoverflow`
thread](https://stackoverflow.com/questions/39126537/replace-na-in-a-factor-column-in-r).

# `t_summary.factor`

When summarizing factor variables the missing values do not get listed by
default.

```{r}
#t_summary(x = factor(c(letters[1:5], NA)), col_by = factor(rep(c("I", "II"), 3)))
```

In order to display the missing values one can use the `useNA` argument similar
as in `table` to convert missing values in factor variables to `"<NA>"`:

```{r}
#t_summary(x = factor(c(letters[1:5], NA)), col_by = factor(rep(c("I", "II"), 3)), useNA = "ifany")
```

