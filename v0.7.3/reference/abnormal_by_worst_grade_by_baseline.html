<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Patient Counts with the Most Extreme Post-Baseline Toxicity Grade by Baseline NCI-CTCAE Grade — abnormal_by_worst_grade_by_baseline • tern</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Patient Counts with the Most Extreme Post-Baseline Toxicity Grade by Baseline NCI-CTCAE Grade — abnormal_by_worst_grade_by_baseline" />
<meta property="og:description" content="Patient count and fraction for laboratory test shift table, highest NCI-CTCAE grade post-baseline by
baseline NCI-CTCAE grade, according to user-defined grouping_list, is generated. Per GDSR
standard:
for abnormality in the high direction, grouping_list should be defined as: 
list(&quot;Not High&quot; = c(0, -1, -2, -3, -4), &quot;1&quot; = 1, &quot;2&quot; = 2, &quot;3&quot; = 3, &quot;4&quot; = 4, &quot;Missing&quot; = &quot;&amp;lt;Missing&amp;gt;&quot;)
for abnormality in the low direction, grouping_list should be defined as: 
list(&quot;Not Low&quot; = c(0, 1, 2, 3, 4), &quot;1&quot; = -1, &quot;2&quot; = -2, &quot;3&quot; = -3, &quot;4&quot; = -4, &quot;Missing&quot; = &quot;&amp;lt;Missing&amp;gt;&quot;) 


For a particular baseline NCI-CTCAE grade group that is in the grouping_list, for example, &quot;Not High&quot;,
assuming abnormality is in the high direction, the total number of patients who are &quot;Not High&quot; at
baseline is counted, that is the number of patients who have a baseline NCI-CTCAE grades of 0,
-1, -2, -3 or -4. In addition, for these patients who are &quot;Not High&quot; at baseline, the
counts and fractions of patients with post-baseline NCI-CTCAE grades in each of the groups in
group_listing are produced, i.e., &quot;Not High&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot; and &quot;Missing&quot;. Note the order
of grouping_list controls the output order. 
Care must be taken when specifying the grouping_list. Each element in the grouping_list must
be specified using a = sign; on the left of the = sign is the name of the group; on the
right of = sign is NCI-CTCAE grade(s) to be included in that group, i.e., &quot;NAME&quot; = c(1, 2, 3, 4). 
User may define custom functions for extracting the worst lab grades. At the minimum, the output df
should contain relevant subject-level variables derived from ADSL (e.g. USUBJID, ACTARM) and analysis variables
sourced from ADLB:PARAM or PARAMCD, ATOXGR and BTOXGR.
One worst lab grade per patient per lab is expected for each of ATOXGR and BTOXGR unless summarizing the worst
grade by visit in which case a visit variable such as AVISIT would be necessary." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tern</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/introduction.html">Introduction to tern</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<!-- start_releases -->
<li class="dropdown">
	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
Other releases
<span class="caret"></span></a><ul class="dropdown-menu" role="menu">
   <li><a href="../../index.html">latest</a></li>
   <li><a href="../../pre-release/index.html">pre-release</a></li>
   <li><a href="../../v0.7.5/index.html">v0.7.5</a></li>
   <li><a href="../../v0.7.4/index.html">v0.7.4</a></li>
   <li><a href="../../v0.7.3/index.html">v0.7.3</a></li>
   <li><a href="../../v0.7.1/index.html">v0.7.1</a></li>
   <li><a href="../../v0.7.0/index.html">v0.7.0</a></li>
   <li><a href="../../v0.6.9/index.html">v0.6.9</a></li>
   <li><a href="../../v0.6.8/index.html">v0.6.8</a></li>
   <li><a href="../../v0.6.7/index.html">v0.6.7</a></li>
   <li><a href="../../v0.6.6/index.html">v0.6.6</a></li>
   <li><a href="../../v0.6.5/index.html">v0.6.5</a></li>
   <li><a href="../../v0.6.4/index.html">v0.6.4</a></li>
   <li><a href="../../v0.6.2/index.html">v0.6.2</a></li>
   <li><a href="../../v0.6.1/index.html">v0.6.1</a></li>
   <li><a href="../../v0.6.0/index.html">v0.6.0</a></li>
   <li><a href="../../v0.5.0/index.html">v0.5.0</a></li>
</ul></li>
<!-- end_releases -->
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.roche.com/NEST/tern">
    <span class="fas fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Patient Counts with the Most Extreme Post-Baseline Toxicity Grade by Baseline NCI-CTCAE Grade</h1>
    
    <div class="hidden name"><code>abnormal_by_worst_grade_by_baseline.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Patient count and fraction for laboratory test shift table, highest NCI-CTCAE grade post-baseline by
baseline NCI-CTCAE grade, according to user-defined <code>grouping_list</code>, is generated. Per GDSR
standard:</p><ul>
<li><p>for abnormality in the high direction, <code>grouping_list</code> should be defined as: <br />
<code><a href='https://rdrr.io/r/base/list.html'>list("Not High" = c(0, -1, -2, -3, -4), "1" = 1, "2" = 2, "3" = 3, "4" = 4, "Missing" = "&lt;Missing&gt;")</a></code></p></li>
<li><p>for abnormality in the low direction, <code>grouping_list</code> should be defined as: <br />
<code><a href='https://rdrr.io/r/base/list.html'>list("Not Low" = c(0, 1, 2, 3, 4), "1" = -1, "2" = -2, "3" = -3, "4" = -4, "Missing" = "&lt;Missing&gt;")</a></code> <br /></p></li>
</ul>

<p>For a particular baseline NCI-CTCAE grade group that is in the <code>grouping_list</code>, for example, "Not High",
assuming abnormality is in the high direction, the total number of patients who are "Not High" at
baseline is counted, that is the number of patients who have a baseline NCI-CTCAE grades of <code>0</code>,
<code>-1</code>, <code>-2</code>, <code>-3</code> or <code>-4</code>. In addition, for these patients who are "Not High" at baseline, the
counts and fractions of patients with post-baseline NCI-CTCAE grades in each of the groups in
<code>group_listing</code> are produced, i.e., "Not High", "1", "2", "3", "4" and "Missing". Note the order
of <code>grouping_list</code> controls the output order. <br /></p>
<p>Care must be taken when specifying the <code>grouping_list</code>. Each element in the <code>grouping_list</code> must
be specified using a <code>=</code> sign; on the left of the <code>=</code> sign is the name of the group; on the
right of <code>=</code> sign is NCI-CTCAE grade(s) to be included in that group, i.e., <code>"NAME" = c(1, 2, 3, 4)</code>. <br /></p>
<p>User may define custom functions for extracting the worst lab grades. At the minimum, the output <code>df</code>
should contain relevant subject-level variables derived from ADSL (e.g. <code>USUBJID</code>, <code>ACTARM</code>) and analysis variables
sourced from ADLB:<code>PARAM</code> or <code>PARAMCD</code>, <code>ATOXGR</code> and <code>BTOXGR</code>.
One worst lab grade per patient per lab is expected for each of <code>ATOXGR</code> and <code>BTOXGR</code> unless summarizing the worst
grade by visit in which case a visit variable such as <code>AVISIT</code> would be necessary.</p>
    </div>

    <pre class="usage"><span class='fu'>h_adsl_adlb_merge_using_worst_flag</span>(
  <span class='no'>adsl</span>,
  <span class='no'>adlb</span>,
  <span class='kw'>worst_flag</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>WGRHIFL</span> <span class='kw'>=</span> <span class='st'>"Y"</span>),
  <span class='kw'>by_visit</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>no_fillin_visits</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"SCREENING"</span>, <span class='st'>"BASELINE"</span>)
)

<span class='fu'>h_group_counter</span>(<span class='no'>df</span>, <span class='no'>id</span>, <span class='no'>.var</span>, <span class='no'>grouping_list</span>)

<span class='fu'>s_count_abnormal_by_worst_grade_by_baseline</span>(
  <span class='no'>df</span>,
  <span class='kw'>.var</span> <span class='kw'>=</span> <span class='st'>"ATOXGR"</span>,
  <span class='kw'>grouping_list</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>Missing</span> <span class='kw'>=</span> <span class='st'>"&lt;Missing&gt;"</span>, <span class='kw'>`Not High`</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, -<span class='fl'>1</span>, -<span class='fl'>2</span>, -<span class='fl'>3</span>, -<span class='fl'>4</span>), <span class='kw'>`1`</span> <span class='kw'>=</span>
    <span class='fl'>1</span>, <span class='kw'>`2`</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>`3`</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>`4`</span> <span class='kw'>=</span> <span class='fl'>4</span>),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"USUBJID"</span>, <span class='kw'>by_var</span> <span class='kw'>=</span> <span class='st'>"BTOXGR"</span>, <span class='kw'>by_grade</span> <span class='kw'>=</span> <span class='st'>"Missing"</span>)
)

<span class='fu'>a_count_abnormal_by_worst_grade_by_baseline</span>(
  <span class='no'>df</span>,
  <span class='kw'>.var</span> <span class='kw'>=</span> <span class='st'>"ATOXGR"</span>,
  <span class='kw'>grouping_list</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>Missing</span> <span class='kw'>=</span> <span class='st'>"&lt;Missing&gt;"</span>, <span class='kw'>`Not High`</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, -<span class='fl'>1</span>, -<span class='fl'>2</span>, -<span class='fl'>3</span>, -<span class='fl'>4</span>), <span class='kw'>`1`</span> <span class='kw'>=</span>
    <span class='fl'>1</span>, <span class='kw'>`2`</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>`3`</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>`4`</span> <span class='kw'>=</span> <span class='fl'>4</span>),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"USUBJID"</span>, <span class='kw'>by_var</span> <span class='kw'>=</span> <span class='st'>"BTOXGR"</span>, <span class='kw'>by_grade</span> <span class='kw'>=</span> <span class='st'>"Missing"</span>)
)

<span class='fu'>count_abnormal_by_worst_grade_by_baseline</span>(
  <span class='no'>lyt</span>,
  <span class='no'>var</span>,
  <span class='no'>grouping_list</span>,
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"USUBJID"</span>, <span class='kw'>by_var</span> <span class='kw'>=</span> <span class='st'>"BTOXGR"</span>, <span class='kw'>by_grade_list</span> <span class='kw'>=</span> <span class='kw'>NULL</span>),
  <span class='no'>...</span>,
  <span class='kw'>table_names</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.stats</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.formats</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.labels</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.indent_mods</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>adsl</th>
      <td><p>(<code>data frame</code>) ADSL dataframe</p></td>
    </tr>
    <tr>
      <th>adlb</th>
      <td><p>(<code>data frame</code>) ADLB dataframe</p></td>
    </tr>
    <tr>
      <th>worst_flag</th>
      <td><p>(named <code>vector</code>)
Worst post-baseline lab flag variable</p></td>
    </tr>
    <tr>
      <th>by_visit</th>
      <td><p>(<code>logical</code>) defaults to <code>FALSE</code> to generate worst grade per patient.
If worst grade per patient per visit is specified for <code>worst_flag</code>, then
<code>by_visit</code> should be <code>TRUE</code> to generate worst grade patient per visit.</p></td>
    </tr>
    <tr>
      <th>no_fillin_visits</th>
      <td><p>(named <code>character</code>)
Visits that are not considered for post-baseline worst toxicity grade. Defaults to <code><a href='https://rdrr.io/r/base/c.html'>c("SCREENING", "BASELINE")</a></code>.</p></td>
    </tr>
    <tr>
      <th>df</th>
      <td><p>(<code>data frame</code>)<br /> data set containing all analysis variables.</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>(<code>string</code>) <br /> subject variable name.</p></td>
    </tr>
    <tr>
      <th>.var</th>
      <td><p>(<code>string</code>)<br /> single variable name that is passed by <code>rtables</code> when requested
by a statistics function.</p></td>
    </tr>
    <tr>
      <th>grouping_list</th>
      <td><p>(named <code>list</code>) defining how inner NCI-CTCAE grades should be grouped.</p></td>
    </tr>
    <tr>
      <th>variables</th>
      <td><p>(named <code>list</code> of <code>string</code>) list of additional analysis variables including:</p><ul>
<li><p><code>id</code> (<code>string</code>): <br /> subject variable name</p></li>
<li><p><code>by_var</code> (<code>string</code>): <br /> name of the data column containing the outer level toxicity variable within which toxicity
variable <code>.var</code> is counted. Inputs for <code>by_var</code> and <code>.var</code> can be switched, e.g. <code>.var = ATOXGR</code> and
<code>by_var = BTOXGR</code>, this generates post-baseline grade by baseline grade table, or <code>.var = BTOXGR</code> and
<code>by_var = ATOXGR</code>, this generates baseline grade by post-baseline grade table.</p></li>
<li><p><code>by_grade</code> (<code>character</code>): <br /> outer level toxicity group of interest for
<code>s_count_abnormal_by_worst_grade_by_baseline()</code>. <code>by_grade</code> must be identical to the name
of an element in the <code>grouping_list</code></p></li>
<li><p><code>by_grade_list</code> (<code>list</code>): <br /> indicating all outer groups of interest for
<code>count_abnormal_by_worst_grade_by_baseline()</code>. If <code>by_grade_list`` is not specified, then all groups in </code>grouping_list<code>will be used.</code>by_grade_list<code>follows the same format as</code>grouping_list`.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>lyt</th>
      <td><p>(<code>layout</code>)<br /> input layout where analyses will be added to.</p></td>
    </tr>
    <tr>
      <th>var</th>
      <td><p>(<code>string</code>)<br /> single variable name for the primary analysis variable.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments for the lower level functions.</p></td>
    </tr>
    <tr>
      <th>table_names</th>
      <td><p>(<code>character</code>)<br /> this can be customized in case that the same <code>vars</code> are analyzed multiple times,
to avoid warnings from <code>rtables</code>.</p></td>
    </tr>
    <tr>
      <th>.stats</th>
      <td><p>(<code>character</code>)<br /> statistics to select for the table.</p></td>
    </tr>
    <tr>
      <th>.formats</th>
      <td><p>(named <code>character</code> or <code>list</code>)<br /> formats for the statistics.</p></td>
    </tr>
    <tr>
      <th>.labels</th>
      <td><p>(named <code>character</code>)<br /> labels for the statistics (without indent).</p></td>
    </tr>
    <tr>
      <th>.indent_mods</th>
      <td><p>(named <code>integer</code>)<br /> indent modifiers for the labels.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>h_adsl_adlb_merge_using_worst_flag()</code> returns a <code>df</code>
containing variables shared between <code>adlb</code> and <code>adsl</code> along with variables relevant for analysis:
<code>PARAM</code>, <code>PARAMCD</code>, <code>ATOXGR</code>, and <code>BTOXGR</code>.  Optionally <code>AVISIT</code>, <code>AVISITN</code> are included when <code>by_visit = TRUE</code> and
<code>no_fillin_visits = c("SCREENING", "BASELINE")</code>.</p>
<p><code>h_group_counter()</code> returns the total number of patients, and counts and fractions for each
group identified in the <code>grouping_list</code> in a named list, with names from <code>grouping_list</code>.</p>
<p><code>s_count_abnormal_by_worst_grade_by_baseline()</code> returns the total patient count, and the
counts and fraction of patients' worst post-baseline NCI-CTCAE grades in each of the groups
in <code>group_listing</code>, for a particular baseline NCI-CTCAE grade group, <code>by_grade</code>. Elements of
<code>by_grade_list</code> must be in the set of names of elements in <code>grouping_list</code>, or</p>
<p><code><a href='abnormal_by_worst_grade.html'>a_count_abnormal_by_worst_grade()</a></code> returns the corresponding list with formatted <code><a href='https://rdrr.io/pkg/rtables/man/CellValue.html'>rtables::CellValue()</a></code>.</p>
    <h2 class="hasAnchor" id="functions"><a class="anchor" href="#functions"></a>Functions</h2>

    
<ul>
<li><p><code>h_adsl_adlb_merge_using_worst_flag</code>: Helper function to filter ADSL and ADLB datasets
to create a dataset with the worst post-baseline lab using (<code>worst_flag</code>) flag. Missing data will be created for the
following situations:</p><ul>
<li><p>patients who are present in ADSL but no lab data in ADLB (both baseline and post-baseline)</p></li>
<li><p>patients who do not have any post-baseline lab values</p></li>
<li><p>patients without any post-baseline values flagged as the worst</p></li>
</ul></li>
<li><p><code>h_group_counter</code>: Helper function to group patients
(identified using <code>id</code>) according to post-baseline toxicity in <code>.var</code>,
then the counts and fractions are produced according to <code>grouping_list</code>, along with total number
of patients.</p></li>
<li><p><code>s_count_abnormal_by_worst_grade_by_baseline</code>: Statistics function, for each NCI-CTCAE grade
group specified in <code>by_grade</code>, this function calculates the total, counts and fraction of
patients' worst NCI-CTCAE grades in <code>.var</code> falling into each of the groups
in <code>group_listing</code>.</p></li>
<li><p><code>a_count_abnormal_by_worst_grade_by_baseline</code>: Formatted Analysis function which can be further customized by
calling <code><a href='https://rdrr.io/pkg/rtables/man/make_afun.html'>rtables::make_afun()</a></code> on it. It is used as <code>afun</code> in <code><a href='https://rdrr.io/pkg/rtables/man/analyze.html'>rtables::analyze()</a></code>.</p></li>
<li><p><code>count_abnormal_by_worst_grade_by_baseline</code>: Layout creating function which can be used for creating tables,
which can take statistics function arguments and additional format arguments (see below).</p></li>
</ul>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>random.cdisc.data</span>)
<span class='no'>adlb</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/random.cdisc.data/man/radlb.html'>radlb</a></span>(<span class='kw'>cached</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>adsl</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/random.cdisc.data/man/radsl.html'>radsl</a></span>(<span class='kw'>cached</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># `h_adsl_adlb_merge_using_worst_flag`</span>
<span class='no'>adlb_out</span> <span class='kw'>&lt;-</span> <span class='fu'>h_adsl_adlb_merge_using_worst_flag</span>(<span class='no'>adsl</span>, <span class='no'>adlb</span>, <span class='kw'>worst_flag</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"WGRHIFL"</span> <span class='kw'>=</span> <span class='st'>"Y"</span>))

<span class='co'># `h_adsl_adlb_merge_using_worst_flag` by visit example</span>
<span class='no'>adlb_out_by_visit</span> <span class='kw'>&lt;-</span> <span class='fu'>h_adsl_adlb_merge_using_worst_flag</span>(
  <span class='no'>adsl</span>,
  <span class='no'>adlb</span>,
  <span class='kw'>worst_flag</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"WGRLOVFL"</span> <span class='kw'>=</span> <span class='st'>"Y"</span>),
  <span class='kw'>by_visit</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)


<span class='co'># `h_group_counter`</span>
<span class='fu'>h_group_counter</span>(
  <span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>adlb_out</span>,
  <span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"USUBJID"</span>,
  <span class='kw'>.var</span> <span class='kw'>=</span> <span class='st'>"ATOXGR"</span>,
  <span class='kw'>grouping_list</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='kw'>`Missing`</span><span class='kw'>=</span> <span class='st'>"&lt;Missing&gt;"</span>,
    <span class='kw'>`Not High`</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, -<span class='fl'>1</span>, -<span class='fl'>2</span>, -<span class='fl'>3</span>, -<span class='fl'>4</span>),
    <span class='kw'>`1`</span> <span class='kw'>=</span> <span class='fl'>1</span>,
    <span class='kw'>`2`</span> <span class='kw'>=</span> <span class='fl'>2</span>,
    <span class='kw'>`3`</span> <span class='kw'>=</span> <span class='fl'>3</span>,
    <span class='kw'>`4`</span> <span class='kw'>=</span> <span class='fl'>4</span>
    )
  )</div><div class='output co'>#&gt; $count
#&gt; $count$Total
#&gt; [1] 400
#&gt; 
#&gt; 
#&gt; $count_fraction
#&gt; $count_fraction$Missing
#&gt; [1] 0 0
#&gt; 
#&gt; $count_fraction$`Not High`
#&gt; [1] 374.000   0.935
#&gt; 
#&gt; $count_fraction$`1`
#&gt; [1] 128.00   0.32
#&gt; 
#&gt; $count_fraction$`2`
#&gt; [1] 123.0000   0.3075
#&gt; 
#&gt; $count_fraction$`3`
#&gt; [1] 111.0000   0.2775
#&gt; 
#&gt; $count_fraction$`4`
#&gt; [1] 93.0000  0.2325
#&gt; 
#&gt; </div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>dplyr</span>)
<span class='co'># Count worst post-baseline lab for patients who were `Not Low` at baseline.</span>
<span class='fu'>s_count_abnormal_by_worst_grade_by_baseline</span>(
  <span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>adlb_out</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>ARMCD</span> <span class='kw'>==</span> <span class='st'>"ARM A"</span> <span class='kw'>&amp;</span> <span class='no'>PARAMCD</span> <span class='kw'>==</span> <span class='st'>"CRP"</span>),
  <span class='kw'>.var</span> <span class='kw'>=</span> <span class='st'>"ATOXGR"</span>,
  <span class='kw'>grouping_list</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='st'>"Missing"</span> <span class='kw'>=</span> <span class='st'>"&lt;Missing&gt;"</span>,
    <span class='st'>"Not Low"</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span>),
    <span class='st'>"1"</span> <span class='kw'>=</span> -<span class='fl'>1</span>,
    <span class='st'>"2"</span> <span class='kw'>=</span> -<span class='fl'>2</span>,
    <span class='st'>"3"</span> <span class='kw'>=</span> -<span class='fl'>3</span>,
    <span class='st'>"4"</span> <span class='kw'>=</span> -<span class='fl'>4</span>
    ),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"USUBJID"</span>,
    <span class='kw'>by_var</span> <span class='kw'>=</span> <span class='st'>"BTOXGR"</span>,
    <span class='kw'>by_grade</span> <span class='kw'>=</span> <span class='st'>"Not Low"</span>
  )
)</div><div class='output co'>#&gt; $count
#&gt; $count$Total
#&gt; [1] 0
#&gt; 
#&gt; 
#&gt; $count_fraction
#&gt; $count_fraction$Missing
#&gt; [1] 0 0
#&gt; 
#&gt; $count_fraction$`Not Low`
#&gt; [1] 0 0
#&gt; 
#&gt; $count_fraction$`1`
#&gt; [1] 0 0
#&gt; 
#&gt; $count_fraction$`2`
#&gt; [1] 0 0
#&gt; 
#&gt; $count_fraction$`3`
#&gt; [1] 0 0
#&gt; 
#&gt; $count_fraction$`4`
#&gt; [1] 0 0
#&gt; 
#&gt; </div><div class='input'>

<span class='no'>afun</span> <span class='kw'>&lt;-</span> <span class='fu'>make_afun</span>(<span class='no'>a_count_abnormal_by_worst_grade_by_baseline</span>, <span class='kw'>.ungroup_stats</span> <span class='kw'>=</span> <span class='st'>"count_fraction"</span>)
<span class='fu'>afun</span>(
<span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>adlb_out</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>ARMCD</span> <span class='kw'>==</span> <span class='st'>"ARM A"</span> <span class='kw'>&amp;</span> <span class='no'>PARAMCD</span> <span class='kw'>==</span> <span class='st'>"CRP"</span>),
<span class='kw'>.var</span> <span class='kw'>=</span> <span class='st'>"ATOXGR"</span>,
<span class='kw'>grouping_list</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
  <span class='st'>"Missing"</span> <span class='kw'>=</span> <span class='st'>"&lt;Missing&gt;"</span>,
  <span class='st'>"Not High"</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, -<span class='fl'>1</span>, -<span class='fl'>2</span>, -<span class='fl'>3</span>, -<span class='fl'>4</span>),
  <span class='st'>"1"</span> <span class='kw'>=</span> <span class='fl'>1</span>,
   <span class='st'>"2"</span> <span class='kw'>=</span> <span class='fl'>2</span>,
   <span class='st'>"3"</span> <span class='kw'>=</span> <span class='fl'>3</span>,
   <span class='st'>"4"</span> <span class='kw'>=</span> <span class='fl'>4</span>
   ),
<span class='kw'>variables</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"USUBJID"</span>,
                 <span class='kw'>by_var</span> <span class='kw'>=</span> <span class='st'>"BTOXGR"</span>,
                 <span class='kw'>by_grade</span> <span class='kw'>=</span> <span class='st'>"4"</span> )
)</div><div class='output co'>#&gt; RowsVerticalSection (in_rows) object print method:
#&gt; ----------------------------
#&gt;   row_name formatted_cell indent_mod row_label
#&gt; 1    count              6          0     count
#&gt; 2  Missing              0          0   Missing
#&gt; 3 Not High      5 (83.3%)          0  Not High
#&gt; 4        1              0          0         1
#&gt; 5        2      1 (16.7%)          0         2
#&gt; 6        3              0          0         3
#&gt; 7        4              0          0         4</div><div class='input'>

<span class='fu'>basic_table</span>() <span class='kw'>%&gt;%</span>
  <span class='fu'>split_cols_by</span>(<span class='st'>"ARMCD"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>add_colcounts</span>() <span class='kw'>%&gt;%</span>
  <span class='fu'>split_rows_by</span>(<span class='st'>"PARAMCD"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>count_abnormal_by_worst_grade_by_baseline</span>(
    <span class='kw'>var</span> <span class='kw'>=</span> <span class='st'>"ATOXGR"</span>,
    <span class='kw'>grouping_list</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
      <span class='st'>"Missing"</span> <span class='kw'>=</span> <span class='st'>"&lt;Missing&gt;"</span>,
      <span class='st'>"Not High"</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, -<span class='fl'>1</span>, -<span class='fl'>2</span>, -<span class='fl'>3</span>, -<span class='fl'>4</span>),
      <span class='st'>"1"</span> <span class='kw'>=</span> <span class='fl'>1</span>,
      <span class='st'>"2"</span> <span class='kw'>=</span> <span class='fl'>2</span>,
      <span class='st'>"3"</span> <span class='kw'>=</span> <span class='fl'>3</span>,
      <span class='st'>"4"</span> <span class='kw'>=</span> <span class='fl'>4</span>
      ),
    <span class='kw'>variables</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
      <span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"USUBJID"</span>,
      <span class='kw'>by_var</span> <span class='kw'>=</span> <span class='st'>"BTOXGR"</span>
      )
    ) <span class='kw'>%&gt;%</span>
  <span class='fu'>build_table</span>(<span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>adlb_out</span>, <span class='kw'>alt_counts_df</span> <span class='kw'>=</span> <span class='no'>adsl</span>)</div><div class='output co'>#&gt;                  ARM A        ARM B        ARM C   
#&gt;                 (N=134)      (N=134)      (N=132)  
#&gt; ---------------------------------------------------
#&gt; ALT                                                
#&gt;   Missing                                          
#&gt;     Total          0            0            0     
#&gt;     Missing        0            0            0     
#&gt;     Not High       0            0            0     
#&gt;     1              0            0            0     
#&gt;     2              0            0            0     
#&gt;     3              0            0            0     
#&gt;     4              0            0            0     
#&gt;   Not High                                         
#&gt;     Total         121          118          118    
#&gt;     Missing        0            0            0     
#&gt;     Not High   72 (59.5%)   70 (59.3%)    59 (50%) 
#&gt;     1          16 (13.2%)    13 (11%)    17 (14.4%)
#&gt;     2          13 (10.7%)   12 (10.2%)   18 (15.3%)
#&gt;     3           9 (7.4%)    14 (11.9%)   12 (10.2%)
#&gt;     4          11 (9.1%)     9 (7.6%)    12 (10.2%)
#&gt;   1                                                
#&gt;     Total          4            4            3     
#&gt;     Missing        0            0            0     
#&gt;     Not High    1 (25%)      1 (25%)     2 (66.7%) 
#&gt;     1           1 (25%)         0            0     
#&gt;     2           1 (25%)         0            0     
#&gt;     3              0         1 (25%)     1 (33.3%) 
#&gt;     4           1 (25%)      2 (50%)         0     
#&gt;   2                                                
#&gt;     Total          4            4            4     
#&gt;     Missing        0            0            0     
#&gt;     Not High    3 (75%)      3 (75%)      3 (75%)  
#&gt;     1              0         1 (25%)      1 (25%)  
#&gt;     2           1 (25%)         0            0     
#&gt;     3              0            0            0     
#&gt;     4              0            0            0     
#&gt;   3                                                
#&gt;     Total          2            5            5     
#&gt;     Missing        0            0            0     
#&gt;     Not High    2 (100%)     2 (40%)      4 (80%)  
#&gt;     1              0         2 (40%)         0     
#&gt;     2              0         1 (20%)         0     
#&gt;     3              0            0            0     
#&gt;     4              0            0         1 (20%)  
#&gt;   4                                                
#&gt;     Total          3            3            2     
#&gt;     Missing        0            0            0     
#&gt;     Not High   1 (33.3%)    2 (66.7%)     2 (100%) 
#&gt;     1          1 (33.3%)        0            0     
#&gt;     2              0            0            0     
#&gt;     3          1 (33.3%)    1 (33.3%)        0     
#&gt;     4              0            0            0     
#&gt; CRP                                                
#&gt;   Missing                                          
#&gt;     Total          0            0            0     
#&gt;     Missing        0            0            0     
#&gt;     Not High       0            0            0     
#&gt;     1              0            0            0     
#&gt;     2              0            0            0     
#&gt;     3              0            0            0     
#&gt;     4              0            0            0     
#&gt;   Not High                                         
#&gt;     Total         115          115          114    
#&gt;     Missing        0            0            0     
#&gt;     Not High   60 (52.2%)   68 (59.1%)   70 (61.4%)
#&gt;     1          17 (14.8%)   13 (11.3%)    9 (7.9%) 
#&gt;     2          12 (10.4%)   14 (12.2%)   13 (11.4%)
#&gt;     3          16 (13.9%)   10 (8.7%)    13 (11.4%)
#&gt;     4          10 (8.7%)    10 (8.7%)     9 (7.9%) 
#&gt;   1                                                
#&gt;     Total          5            5            5     
#&gt;     Missing        0            0            0     
#&gt;     Not High    4 (80%)      3 (60%)      5 (100%) 
#&gt;     1              0            0            0     
#&gt;     2              0         2 (40%)         0     
#&gt;     3              0            0            0     
#&gt;     4           1 (20%)         0            0     
#&gt;   2                                                
#&gt;     Total          6            5            5     
#&gt;     Missing        0            0            0     
#&gt;     Not High    3 (50%)      3 (60%)      4 (80%)  
#&gt;     1              0         1 (20%)         0     
#&gt;     2          2 (33.3%)        0            0     
#&gt;     3              0            0            0     
#&gt;     4          1 (16.7%)     1 (20%)      1 (20%)  
#&gt;   3                                                
#&gt;     Total          2            3            5     
#&gt;     Missing        0            0            0     
#&gt;     Not High    2 (100%)    1 (33.3%)     4 (80%)  
#&gt;     1              0            0            0     
#&gt;     2              0            0            0     
#&gt;     3              0        1 (33.3%)     1 (20%)  
#&gt;     4              0        1 (33.3%)        0     
#&gt;   4                                                
#&gt;     Total          6            6            3     
#&gt;     Missing        0            0            0     
#&gt;     Not High   5 (83.3%)    4 (66.7%)     3 (100%) 
#&gt;     1              0        1 (16.7%)        0     
#&gt;     2          1 (16.7%)        0            0     
#&gt;     3              0        1 (16.7%)        0     
#&gt;     4              0            0            0     
#&gt; IGA                                                
#&gt;   Missing                                          
#&gt;     Total          0            0            0     
#&gt;     Missing        0            0            0     
#&gt;     Not High       0            0            0     
#&gt;     1              0            0            0     
#&gt;     2              0            0            0     
#&gt;     3              0            0            0     
#&gt;     4              0            0            0     
#&gt;   Not High                                         
#&gt;     Total         119          123          119    
#&gt;     Missing        0            0            0     
#&gt;     Not High   61 (51.3%)   69 (56.1%)   74 (62.2%)
#&gt;     1          24 (20.2%)   12 (9.8%)    13 (10.9%)
#&gt;     2          13 (10.9%)   20 (16.3%)   12 (10.1%)
#&gt;     3          11 (9.2%)    11 (8.9%)    16 (13.4%)
#&gt;     4          10 (8.4%)    11 (8.9%)     4 (3.4%) 
#&gt;   1                                                
#&gt;     Total          2            4            6     
#&gt;     Missing        0            0            0     
#&gt;     Not High    2 (100%)     2 (50%)     5 (83.3%) 
#&gt;     1              0            0            0     
#&gt;     2              0            0        1 (16.7%) 
#&gt;     3              0            0            0     
#&gt;     4              0         2 (50%)         0     
#&gt;   2                                                
#&gt;     Total          4            4            3     
#&gt;     Missing        0            0            0     
#&gt;     Not High    3 (75%)      2 (50%)     1 (33.3%) 
#&gt;     1              0         2 (50%)         0     
#&gt;     2              0            0        1 (33.3%) 
#&gt;     3              0            0        1 (33.3%) 
#&gt;     4           1 (25%)         0            0     
#&gt;   3                                                
#&gt;     Total          5            2            2     
#&gt;     Missing        0            0            0     
#&gt;     Not High    3 (60%)         0         1 (50%)  
#&gt;     1           1 (20%)         0            0     
#&gt;     2              0            0         1 (50%)  
#&gt;     3           1 (20%)      2 (100%)        0     
#&gt;     4              0            0            0     
#&gt;   4                                                
#&gt;     Total          4            1            2     
#&gt;     Missing        0            0            0     
#&gt;     Not High    3 (75%)      1 (100%)     1 (50%)  
#&gt;     1              0            0            0     
#&gt;     2           1 (25%)         0         1 (50%)  
#&gt;     3              0            0            0     
#&gt;     4              0            0            0     </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by NEST, Roche, Saibah Chohan, Francois Collin, Nick Paszty, Ting Qi, Daniel Sabanes Bove, Jana Stoilova, Adrian Waddell, Heng Wang, Godwin Yung, Carreras Maximo, Zhao Rui, Wojciech Wojciak.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


