<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Cox proportional hazards regression for standard outputs — t_coxreg • tern</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Cox proportional hazards regression for standard outputs — t_coxreg" />
<meta property="og:description" content="Cox models are the most commonly used methods to estimate the magnitude of
the effect in survival analysis. It assumes proportional hazards: the ratio
of the hazards of between groups (e.g., two arms) is constant over time.
This ratio is referred to as the &quot;hazard ratio&quot; (HR) and is one of the
most commonly reported metrics to describe the effect size in survival
analysis." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tern</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/missing-data.html">Missing Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<!-- start_releases -->
<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
Other releases
<span class="caret"></span></a><ul class="dropdown-menu" role="menu">
   <li><a href="../../index.html">latest</a></li>
   <li><a href="../../pre-release/index.html">pre-release</a></li>
   <li><a href="../../v0.7.5/index.html">v0.7.5</a></li>
   <li><a href="../../v0.7.4/index.html">v0.7.4</a></li>
   <li><a href="../../v0.7.3/index.html">v0.7.3</a></li>
   <li><a href="../../v0.7.1/index.html">v0.7.1</a></li>
   <li><a href="../../v0.7.0/index.html">v0.7.0</a></li>
   <li><a href="../../v0.6.9/index.html">v0.6.9</a></li>
   <li><a href="../../v0.6.8/index.html">v0.6.8</a></li>
   <li><a href="../../v0.6.7/index.html">v0.6.7</a></li>
   <li><a href="../../v0.6.6/index.html">v0.6.6</a></li>
   <li><a href="../../v0.6.5/index.html">v0.6.5</a></li>
   <li><a href="../../v0.6.4/index.html">v0.6.4</a></li>
   <li><a href="../../v0.6.2/index.html">v0.6.2</a></li>
   <li><a href="../../v0.6.1/index.html">v0.6.1</a></li>
   <li><a href="../../v0.6.0/index.html">v0.6.0</a></li>
   <li><a href="../../v0.5.0/index.html">v0.5.0</a></li>
</ul></li>
<!-- end_releases -->
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.roche.com/NEST/tern">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Cox proportional hazards regression for standard outputs</h1>
    
    <div class="hidden name"><code>t_coxreg.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Cox models are the most commonly used methods to estimate the magnitude of
the effect in survival analysis. It assumes proportional hazards: the ratio
of the hazards of between groups (e.g., two arms) is constant over time.
This ratio is referred to as the "hazard ratio" (HR) and is one of the
most commonly reported metrics to describe the effect size in survival
analysis.</p>
    </div>

    <pre class="usage"><span class='fu'>t_coxreg</span>(
  <span class='no'>formula</span>,
  <span class='no'>data</span>,
  <span class='kw'>simplify</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>conf_level</span> <span class='kw'>=</span> <span class='fl'>0.95</span>,
  <span class='kw'>pval_method</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"wald"</span>, <span class='st'>"likelihood"</span>, <span class='st'>"log-rank"</span>),
  <span class='kw'>increments</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>A <code>formula</code> corresponding to the
<a href='https://rdrr.io/pkg/survival/man/Surv.html'>survival model</a>:</p><ul>
<li><p>the left-hand side must include <code>Surv(time, event)</code> with time and event
describing occurrence and censoring (see <a href='https://rdrr.io/pkg/survival/man/Surv.html'>Surv()</a>).</p></li>
<li><p>the right-hand side includes predictors and <em>specials</em> which can be used
to specify a pairwise model or a range of candidate univariate models.
See <code>details</code>.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>A <code>data.frame</code> which includes all the variables that are called
in <code>formula</code>.</p></td>
    </tr>
    <tr>
      <th>simplify</th>
      <td><p>If <code>TRUE</code>, returns a <code>rtables</code> object instead of a list of
<code>rtables object</code> when the variable contained in <code>pairwise</code> has only two
levels to compare.</p></td>
    </tr>
    <tr>
      <th>conf_level</th>
      <td><p>The confidence level of the interval.</p></td>
    </tr>
    <tr>
      <th>pval_method</th>
      <td><p>The method used for the estimation of p.values, should be
one of <code>wald</code> (default) or <code>likelihood</code>. The <code>log-rank</code> is accepted for
models including a single variable, specified through <code><a href='pairwise.html'>pairwise()</a></code>.</p></td>
    </tr>
    <tr>
      <th>increments</th>
      <td><p>If a quantitative variable is included, it is possible to
provide the expected level of estimation for the interaction. If provided,
it should be list where each item is a vector giving expected levels and is
named after the variable name as it appears in the <code>formula</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Optional other arguments passed to the Cox regression:</p><ul>
<li><p><code>ties</code> a character string specifying the method for tie handling, one of
<code>exact</code> (default), <code>efron</code>, <code>breslow</code>.</p></li>
<li><p>see <a href='https://rdrr.io/pkg/survival/man/coxph.html'>coxph()</a> for additional settings.</p></li>
</ul></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Depending on <code>formula</code>, returns an <code>rtable</code> object for every
level of <code><a href='pairwise.html'>pairwise()</a></code> if included in <code>COXT01</code>; a single <code>rtable</code> otherwise.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Possible model specifications:</p><ul>
<li><p><code>Surv(time, event) ~ pairwise(Pred)</code>, used to get hazard ratio of each
tested level of treatment <code>Pred</code> independently, given in reference to
the control treatment (see <code><a href='pairwise.html'>pairwise()</a></code>).</p></li>
<li><p><code>Surv(time, event) ~ pairwise(Pred) + univariate(Cov1, Cov2, ...)</code>, add
candidate covariates separated by comas in special <code><a href='univariate.html'>univariate()</a></code> to
test all bivariate combinations of <code>Pred</code> with each <code>Cov</code>. Replacing the
symbol <code>+</code> by <code>*</code> will result in the additional estimation of the
interaction terms. This is similar to <code>COXT01</code> standards.</p></li>
<li><p><code>Surv(time, event) ~ Pred + Cov1 + ... </code> estimates the simple effect of
multiple Cox regression. This provides the <code>COXT02</code> standard output.
Note that the variables in returned tabulation are matched by position
in <code>formula</code>.</p></li>
</ul>

<p>Known limits:</p><ul>
<li><p>the <em>special</em> <code><a href='univariate.html'>univariate()</a></code> requires <code><a href='pairwise.html'>pairwise()</a></code> being also specified.</p></li>
<li><p>the interaction terms in multiple regression are not estimated.</p></li>
<li><p>the third-order interactions are not estimated.</p></li>
</ul>

<p>For further information about the Cox Proportional Hazards Model, check
"Statistical Analysis of Clinical Trials Data with R", NEST team.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='t_coxph_pairwise.html'>t_coxph_pairwise()</a></code>, <code><a href='t_cox_univariate.html'>t_cox_univariate()</a></code>, <code><a href='t_cox_multivariate.html'>t_cox_multivariate()</a></code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>tern</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>random.cdisc.data</span>)
<span class='no'>ADTTE</span>   <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/random.cdisc.data/man/radtte.html'>radtte</a></span>(<span class='kw'>cached</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>ADTTE_f</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span>(<span class='no'>ADTTE</span>, <span class='no'>PARAMCD</span> <span class='kw'>==</span> <span class='st'>"OS"</span>) <span class='co'># _f: filtered</span>
<span class='no'>ADTTE_f</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/with.html'>within</a></span>( <span class='co'># nolint</span>
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span>(
    <span class='no'>ADTTE_f</span>,
    <span class='no'>PARAMCD</span> <span class='kw'>==</span> <span class='st'>"OS"</span>
    <span class='kw'>&amp;</span> <span class='no'>SEX</span> <span class='kw'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"F"</span>, <span class='st'>"M"</span>)
    <span class='kw'>&amp;</span> <span class='no'>RACE</span> <span class='kw'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"ASIAN"</span>, <span class='st'>"BLACK OR AFRICAN AMERICAN"</span>, <span class='st'>"WHITE"</span>)
  ),
  <span class='kw'>expr</span> <span class='kw'>=</span> { <span class='co'># nolint start</span>
    <span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>1</span>)
    <span class='no'>ARMCD</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/droplevels.html'>droplevels</a></span>(<span class='no'>ARMCD</span>)
    <span class='no'>ARMCD</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/relevel.html'>relevel</a></span>(<span class='no'>ARMCD</span>, <span class='st'>"ARM B"</span>)
    <span class='no'>SEX</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/droplevels.html'>droplevels</a></span>(<span class='no'>SEX</span>)
    <span class='no'>RACE</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/droplevels.html'>droplevels</a></span>(<span class='no'>RACE</span>)
    <span class='no'>X</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='no'>ARM</span>))
  }  <span class='co'># nolint end</span>
)

<span class='co'># For annotation on top of Kaplan-Meier grob.</span>
<span class='fu'>t_coxreg</span>(
  <span class='kw'>formula</span> <span class='kw'>=</span> <span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~ <span class='fu'><a href='pairwise.html'>pairwise</a></span>(<span class='no'>ARMCD</span>),
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE_f</span>, <span class='kw'>conf_level</span> <span class='kw'>=</span> <span class='fl'>0.8</span>, <span class='kw'>pval_method</span> <span class='kw'>=</span> <span class='st'>"likelihood"</span>,
  <span class='kw'>ties</span> <span class='kw'>=</span> <span class='st'>"breslow"</span>
)</div><div class='output co'>#&gt;                      HR                   80% CI of HR           Likelihood p-value
#&gt; -----------------------------------------------------------------------------------
#&gt; ARM A              0.9656               (0.7889, 1.1819)               0.8242      
#&gt; ARM C              1.324                (1.0855, 1.615)                0.0708      </div><div class='input'>
<span class='co'>## COXT01 - Standard output, no interactions</span>
<span class='fu'>t_coxreg</span>(
  <span class='kw'>formula</span> <span class='kw'>=</span> <span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~ <span class='fu'><a href='pairwise.html'>pairwise</a></span>(<span class='no'>ARMCD</span>) +
  <span class='fu'><a href='univariate.html'>univariate</a></span>(<span class='no'>SEX</span>, <span class='no'>RACE</span>, <span class='no'>AGE</span>),
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE_f</span>
)</div><div class='output co'>#&gt; $`ARM A`
#&gt;                                                                         Treatment effect adjusted for covariate #         
#&gt; Effect/                                                             Hazard                                                
#&gt; Covariate included                                                Ratio for                                               
#&gt; in the model                                    n                 Treatment              95% CI*               p-value*   
#&gt; --------------------------------------------------------------------------------------------------------------------------
#&gt; Treatment ARM A vs control (ARM B)             247                   0.97              (0.71, 1.32)             0.8243    
#&gt; 
#&gt; Covariate:
#&gt;   SEX                                          247                   0.97              (0.71, 1.31)             0.8224    
#&gt;   RACE                                         247                   0.97              (0.71, 1.33)             0.8701    
#&gt;   AGE                                          247                   0.92              (0.68, 1.26)             0.6084    
#&gt; 
#&gt; # Model including treatment, 
#&gt;   covariate, no interaction.
#&gt; * Wald CI/test
#&gt; Ties: Efron
#&gt; 
#&gt; $`ARM C`
#&gt;                                                                         Treatment effect adjusted for covariate #         
#&gt; Effect/                                                             Hazard                                                
#&gt; Covariate included                                                Ratio for                                               
#&gt; in the model                                    n                 Treatment              95% CI*               p-value*   
#&gt; --------------------------------------------------------------------------------------------------------------------------
#&gt; Treatment ARM C vs control (ARM B)             247                   1.32              (0.98, 1.79)             0.0702    
#&gt; 
#&gt; Covariate:
#&gt;   SEX                                          247                   1.4               (1.02, 1.92)             0.0373    
#&gt;   RACE                                         247                   1.32              (0.98, 1.8)              0.0699    
#&gt;   AGE                                          247                   1.33              (0.98, 1.8)              0.0659    
#&gt; 
#&gt; # Model including treatment, 
#&gt;   covariate, no interaction.
#&gt; * Wald CI/test
#&gt; Ties: Efron
#&gt; </div><div class='input'>
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># For comparison</span>
<span class='no'>mod10</span> <span class='kw'>&lt;-</span> <span class='fu'>coxph</span>(<span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~ <span class='fu'><a href='arm.html'>arm</a></span>(<span class='no'>ARMCD</span>), <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE_f</span>)
<span class='no'>mod11</span> <span class='kw'>&lt;-</span> <span class='fu'>coxph</span>(<span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~ <span class='fu'><a href='arm.html'>arm</a></span>(<span class='no'>ARMCD</span>) + <span class='no'>SEX</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE_f</span>)
<span class='no'>mod12</span> <span class='kw'>&lt;-</span> <span class='fu'>coxph</span>(<span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~ <span class='fu'><a href='arm.html'>arm</a></span>(<span class='no'>ARMCD</span>) + <span class='no'>AGE</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE_f</span>)
<span class='no'>mod13</span> <span class='kw'>&lt;-</span> <span class='fu'>coxph</span>(<span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~ <span class='fu'><a href='arm.html'>arm</a></span>(<span class='no'>ARMCD</span>) + <span class='no'>RACE</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE_f</span>)

<span class='kw pkg'>car</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/car/man/Anova.html'>Anova</a></span>(<span class='no'>mod10</span>,  <span class='kw'>test.statistic</span> <span class='kw'>=</span> <span class='st'>"Wald"</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>'III'</span>)
<span class='kw pkg'>car</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/car/man/Anova.html'>Anova</a></span>(<span class='no'>mod11</span>, <span class='kw'>test.statistic</span> <span class='kw'>=</span> <span class='st'>"Wald"</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>'III'</span>)
<span class='kw pkg'>car</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/car/man/Anova.html'>Anova</a></span>(<span class='no'>mod12</span>, <span class='kw'>test.statistic</span> <span class='kw'>=</span> <span class='st'>"Wald"</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>'III'</span>)
<span class='kw pkg'>car</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/car/man/Anova.html'>Anova</a></span>(<span class='no'>mod13</span>, <span class='kw'>test.statistic</span> <span class='kw'>=</span> <span class='st'>"Wald"</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>'III'</span>)

<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>mod13</span>)$<span class='no'>coefficients</span>
}

<span class='co'>## COXT01 - options: control ties, set confidence interval level,</span>
<span class='co'>##   choose a strata, modify pval_method</span>
<span class='fu'>t_coxreg</span>(
  <span class='kw'>formula</span> <span class='kw'>=</span> <span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~ <span class='fu'><a href='pairwise.html'>pairwise</a></span>(<span class='no'>ARMCD</span>) + <span class='fu'>strata</span>(<span class='no'>SEX</span>) +
    <span class='fu'><a href='univariate.html'>univariate</a></span>(<span class='no'>RACE</span>, <span class='no'>AGE</span>),
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE_f</span>, <span class='kw'>conf_level</span> <span class='kw'>=</span> <span class='fl'>0.80</span>,
  <span class='kw'>ties</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"exact"</span>, <span class='st'>"efron"</span>, <span class='st'>"breslow"</span>)[<span class='fl'>3</span>], <span class='kw'>pval_method</span>  <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"wald"</span>, <span class='st'>"likelihood"</span>)[<span class='fl'>2</span>]
)</div><div class='output co'>#&gt; <span class='message'>skipping term strata(SEX)</span></div><div class='output co'>#&gt; <span class='message'>Warning in `try_car_anova`: simpleWarning in Anova.coxph(mod, test.statistic = test.statistic, type = "III"): LR tests not supported for models with clusters or strata</span>
#&gt; <span class='message'> Wald tests substituted</span></div><div class='output co'>#&gt; <span class='message'>skipping term strata(SEX)</span></div><div class='output co'>#&gt; <span class='message'>Warning in `try_car_anova`: simpleWarning in Anova.coxph(mod, test.statistic = test.statistic, type = "III"): LR tests not supported for models with clusters or strata</span>
#&gt; <span class='message'> Wald tests substituted</span></div><div class='output co'>#&gt; <span class='message'>skipping term strata(SEX)</span></div><div class='output co'>#&gt; <span class='message'>Warning in `try_car_anova`: simpleWarning in Anova.coxph(mod, test.statistic = test.statistic, type = "III"): LR tests not supported for models with clusters or strata</span>
#&gt; <span class='message'> Wald tests substituted</span></div><div class='output co'>#&gt; <span class='message'>skipping term strata(SEX)</span></div><div class='output co'>#&gt; <span class='message'>Warning in `try_car_anova`: simpleWarning in Anova.coxph(mod, test.statistic = test.statistic, type = "III"): LR tests not supported for models with clusters or strata</span>
#&gt; <span class='message'> Wald tests substituted</span></div><div class='output co'>#&gt; <span class='message'>skipping term strata(SEX)</span></div><div class='output co'>#&gt; <span class='message'>Warning in `try_car_anova`: simpleWarning in Anova.coxph(mod, test.statistic = test.statistic, type = "III"): LR tests not supported for models with clusters or strata</span>
#&gt; <span class='message'> Wald tests substituted</span></div><div class='output co'>#&gt; <span class='message'>skipping term strata(SEX)</span></div><div class='output co'>#&gt; <span class='message'>Warning in `try_car_anova`: simpleWarning in Anova.coxph(mod, test.statistic = test.statistic, type = "III"): LR tests not supported for models with clusters or strata</span>
#&gt; <span class='message'> Wald tests substituted</span></div><div class='output co'>#&gt; $`ARM A`
#&gt;                                                                         Treatment effect adjusted for covariate #         
#&gt; Effect/                                                             Hazard                                                
#&gt; Covariate included                                                Ratio for                                               
#&gt; in the model                                    n                 Treatment              80% CI*               p-value*   
#&gt; --------------------------------------------------------------------------------------------------------------------------
#&gt; Treatment ARM A vs control (ARM B)             247                   0.97              (0.79, 1.18)             0.8226    
#&gt; 
#&gt; Covariate:
#&gt;   RACE                                         247                   0.97              (0.79, 1.19)             0.8582    
#&gt;   AGE                                          247                   0.91              (0.74, 1.12)             0.5654    
#&gt; 
#&gt; # Model including treatment, 
#&gt;   covariate, no interaction.
#&gt; * Likelihood CI/test
#&gt; Ties: Breslow
#&gt; 
#&gt; $`ARM C`
#&gt;                                                                         Treatment effect adjusted for covariate #         
#&gt; Effect/                                                             Hazard                                                
#&gt; Covariate included                                                Ratio for                                               
#&gt; in the model                                    n                 Treatment              80% CI*               p-value*   
#&gt; --------------------------------------------------------------------------------------------------------------------------
#&gt; Treatment ARM C vs control (ARM B)             247                   1.35              (1.09, 1.66)             0.066     
#&gt; 
#&gt; Covariate:
#&gt;   RACE                                         247                   1.34              (1.09, 1.65)             0.0696    
#&gt;   AGE                                          247                   1.36              (1.1, 1.68)              0.0606    
#&gt; 
#&gt; # Model including treatment, 
#&gt;   covariate, no interaction.
#&gt; * Likelihood CI/test
#&gt; Ties: Breslow
#&gt; </div><div class='input'>
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># For comparison</span>
<span class='no'>mod20</span> <span class='kw'>&lt;-</span> <span class='fu'>coxph</span>(<span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~ <span class='fu'><a href='arm.html'>arm</a></span>(<span class='no'>ARMCD</span>) + <span class='fu'>strata</span>(<span class='no'>SEX</span>), <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE_f</span>)
<span class='no'>mod21</span> <span class='kw'>&lt;-</span> <span class='fu'>coxph</span>(
  <span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~ <span class='fu'><a href='arm.html'>arm</a></span>(<span class='no'>ARMCD</span>) + <span class='fu'>strata</span>(<span class='no'>SEX</span>) + <span class='no'>AGE</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE_f</span>
)
<span class='no'>mod22</span> <span class='kw'>&lt;-</span> <span class='fu'>coxph</span>(
  <span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~ <span class='fu'><a href='arm.html'>arm</a></span>(<span class='no'>ARMCD</span>) + <span class='fu'>strata</span>(<span class='no'>SEX</span>) + <span class='no'>RACE</span>,
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE_f</span>
)

<span class='kw pkg'>car</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/car/man/Anova.html'>Anova</a></span>(<span class='no'>mod20</span>, <span class='kw'>test.statistic</span> <span class='kw'>=</span> <span class='st'>"Wald"</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>'III'</span>)
<span class='kw pkg'>car</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/car/man/Anova.html'>Anova</a></span>(<span class='no'>mod21</span>, <span class='kw'>test.statistic</span> <span class='kw'>=</span> <span class='st'>"Wald"</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>'III'</span>)
<span class='kw pkg'>car</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/car/man/Anova.html'>Anova</a></span>(<span class='no'>mod22</span>, <span class='kw'>test.statistic</span> <span class='kw'>=</span> <span class='st'>"Wald"</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>'III'</span>)

<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>mod22</span>)$<span class='no'>coefficients</span>
}

<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'>## COXT01 - Addition of the interaction and increments to choose estimated levels</span>
<span class='fu'>t_coxreg</span>(
    <span class='kw'>formula</span> <span class='kw'>=</span>  <span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~
      <span class='fu'><a href='pairwise.html'>pairwise</a></span>(<span class='no'>ARMCD</span>) * <span class='fu'><a href='univariate.html'>univariate</a></span>(<span class='no'>RACE</span>, <span class='no'>SEX</span>, <span class='no'>AGE</span>, <span class='no'>X</span>),
    <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE_f</span>, <span class='kw'>conf_level</span> <span class='kw'>=</span> <span class='fl'>0.74</span>, <span class='kw'>increments</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>X</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(-<span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>2</span>))
)

<span class='co'>## COXT01: Other example, other data</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>dplyr</span>)
<span class='no'>ADSL</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/random.cdisc.data/man/radsl.html'>radsl</a></span>(<span class='kw'>cached</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>ADSL</span> <span class='kw'>&lt;-</span> <span class='no'>ADSL</span> <span class='kw'>%&gt;%</span> <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>SEX</span> <span class='kw'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"F"</span>, <span class='st'>"M"</span>))

<span class='no'>ADTTE</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/random.cdisc.data/man/radtte.html'>radtte</a></span>(<span class='no'>ADSL</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='fl'>2</span>) <span class='kw'>%&gt;%</span>
    <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>PARAMCD</span> <span class='kw'>==</span> <span class='st'>"PFS"</span> <span class='kw'>&amp;</span> <span class='no'>ARMCD</span> <span class='kw'>!=</span> <span class='st'>"ARM C"</span>)
<span class='no'>ADTTE</span>$<span class='no'>ARMCD</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/droplevels.html'>droplevels</a></span>(<span class='no'>ADTTE</span>$<span class='no'>ARMCD</span>)
<span class='no'>ADTTE</span>$<span class='no'>SEX</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/droplevels.html'>droplevels</a></span>(<span class='no'>ADTTE</span>$<span class='no'>SEX</span>)
<span class='fu'>t_coxreg</span>(
    <span class='kw'>formula</span> <span class='kw'>=</span> <span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~
      <span class='fu'><a href='pairwise.html'>pairwise</a></span>(<span class='no'>ARMCD</span>) * <span class='fu'><a href='univariate.html'>univariate</a></span>(<span class='no'>SEX</span>, <span class='no'>BMRKR2</span>, <span class='no'>AGE</span>),
    <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE</span>,
    <span class='kw'>increments</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>AGE</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>ADTTE</span>$<span class='no'>AGE</span>)),
    <span class='kw'>conf_level</span> <span class='kw'>=</span> <span class='fl'>0.975</span>)

<span class='co'># check HRs</span>
<span class='no'>m2</span> <span class='kw'>&lt;-</span> <span class='fu'>coxph</span>(<span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~ <span class='no'>ARMCD</span>*<span class='no'>BMRKR2</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE</span>)
<span class='fu'><a href='https://rdrr.io/r/stats/coef.html'>coef</a></span>(<span class='no'>m2</span>)

<span class='co'># For COXT02</span>
<span class='fu'>t_coxreg</span>(
    <span class='kw'>formula</span> <span class='kw'>=</span> <span class='fu'>Surv</span>(<span class='kw'>time</span> <span class='kw'>=</span> <span class='no'>AVAL</span>, <span class='kw'>event</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>CNSR</span>) ~ <span class='no'>ARMCD</span> + <span class='no'>RACE</span> + <span class='no'>AGE</span> +
    <span class='fu'>strata</span>(<span class='no'>SEX</span>), <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADTTE_f</span>,
    <span class='kw'>conf_level</span> <span class='kw'>=</span> <span class='fl'>0.8</span>, <span class='kw'>pval_method</span> <span class='kw'>=</span> <span class='st'>"likelihood"</span>,  <span class='kw'>ties</span> <span class='kw'>=</span> <span class='st'>"breslow"</span>
 )
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by NEST, Roche, Adrian Waddell, Maximilian Mordig, Heng Wang, Jennifer Li, Yuyao Song, Chendi Liao, Jana Stoilova, Edgar Manukyan, Ting Qi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


