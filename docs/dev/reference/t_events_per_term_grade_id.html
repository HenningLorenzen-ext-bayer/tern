<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Adverse Events Table by Highest NCI CTCAE Grade — t_events_per_term_grade_id • tern</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Adverse Events Table by Highest NCI CTCAE Grade — t_events_per_term_grade_id" />

<meta property="og:description" content="t_events_per_term_grade_id returns adverse events sorted by highest NCI (National Cancer
 Institute) CTCAE (common terminology criteria for adverse avents) grade." />
<meta name="twitter:card" content="summary" />

<meta name="robots" content="noindex">

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tern</a>
        <span class="label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development package">0.5.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.roche.com/Rpackages/tern">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Adverse Events Table by Highest NCI CTCAE Grade</h1>
    
    <div class="hidden name"><code>t_events_per_term_grade_id.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>t_events_per_term_grade_id</code> returns adverse events sorted by highest NCI (National Cancer
 Institute) CTCAE (common terminology criteria for adverse avents) grade.</p>
    
    </div>

    <pre class="usage"><span class='fu'>t_events_per_term_grade_id</span>(<span class='no'>terms</span>, <span class='no'>id</span>, <span class='no'>grade</span>, <span class='no'>col_by</span>, <span class='no'>col_N</span>,
  <span class='kw'>total</span> <span class='kw'>=</span> <span class='st'>"All Patients"</span>, <span class='kw'>grade_levels</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>terms</th>
      <td><p>term information as character or factor vector or dataframe, however factor
levels are not repeated by class, only terms with count &gt; 1 are listed per
class. Currently <code>terms</code> can only be a vector or dataframe with 1/2 column.
<code>var_relabel</code> is used as the character string used as a label in the column header
for each term.</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>unique subject identifier. If a particular subject has no adverse
event then that information needs to be added to the <code>col_N</code> argument.</p></td>
    </tr>
    <tr>
      <th>grade</th>
      <td><p>grade of adverse event as numeric. <code>var_relabel</code> is used as the character 
string used as a label in the column header for each grade.</p></td>
    </tr>
    <tr>
      <th>col_by</th>
      <td><p>group variable that will be used for a column header. <code>col_by</code>
has to be a factor and can not be missing. See 'Examples'.</p></td>
    </tr>
    <tr>
      <th>col_N</th>
      <td><p>numeric vector with information of the number of patients in the
levels of <code>col_by</code>. This is useful if there are patients that have no
adverse events can be accounted for with this argument.</p></td>
    </tr>
    <tr>
      <th>total</th>
      <td><p>character string that will be used as a label for a column with 
pooled total population, default is "All Patients". If the levels of col_by are 
the only columns of interest then total should be <code>NULL</code></p></td>
    </tr>
    <tr>
      <th>grade_levels</th>
      <td><p>numeric, ordered values of possible of grades in a form
of <code>x:y</code>, default is <code>1:5</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>rtable</code> object</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>t_events_per_term_grade_id</code> counts patients according to adverse events (AEs) of greatest
 intensity for system organ class (SOC) and overall rows and includes 
 percentages based on the total number of patients in the column heading 
 (i.e. "N=nnn"). If the intention is to use patients number from subject level
 dataset as N for percentage calculation then adeverse events dataset should
 be left joined to subject level dataset and the <code>col_by</code> variable should
 be dropped from adverse events dataset, see the example. Otherwise, N will be
 derived using adverse events dataset. At the preferred term (PT) level,
 multiple events within a patient of the same PT are counted once using the
 greatest intensity reported.</p>
<p><code>t_events_per_term_grade_id</code> removes any non-complete records, e.g. if class or term are 
 missing. If the intent is to preserve such records, then impute missing 
 values before using <code>t_events_per_term_grade_id</code>.</p>     
<p><code>t_events_per_term_grade_id</code> orders data by "All Patients" column from the most commonly
 reported SOC to the least frequent one. Within SOC, it sorts by decreasing
 frequency of PT. It brakes ties using SOC/PT names in alphabetical order.</p>
<p><code>t_events_per_term_grade_id</code> fills in <code>col_by</code> and <code>grade</code> with <code>0</code> value 
in case there was no AEs reported for particular <code>col_by</code> and/or 
<code>grade</code> category. Use <code>grade_levels</code> to modify the range of existing
grades. If data does not have any records with <code>grade</code> 5 and the intent 
is to show only grades 1-4 rows then use <code>grade_levels = 1:4</code>.</p>
<p>This is an equivalent of the STREAM output <code>%stream_t_summary(templates = aet04)</code>
  (<a href='http://bioportal.roche.com/stream_doc/2_05/um/report_outputs_aet04.html'>http://bioportal.roche.com/stream_doc/2_05/um/report_outputs_aet04.html</a>)</p>
<p>This is an equivalent of the STREAM 1.17 output <code>%stream_t_events_bygrade(templates = aet04)</code>
  (<a href='&lt;https://rochewiki.roche.com/confluence/pages/viewpage.action?pageId=294027501&gt;'>&lt;https://rochewiki.roche.com/confluence/pages/viewpage.action?pageId=294027501&gt;</a>)</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'>library</span>(<span class='no'>dplyr</span>)
<span class='fu'>library</span>(<span class='no'>random.cdisc.data</span>)

<span class='no'>ASL</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/random.cdisc.data/topics/rasl'>rasl</a></span>(<span class='fl'>10</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='fl'>1</span>)
<span class='no'>AAE</span> <span class='kw'>&lt;-</span> <span class='fu'>raae</span>(<span class='no'>ASL</span>, <span class='fl'>4</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='fl'>2</span>)

<span class='no'>ANL</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/join.html'>left_join</a></span>(<span class='no'>AAE</span>, <span class='no'>ASL</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/select.html'>select</a></span>(<span class='no'>USUBJID</span>, <span class='no'>STUDYID</span>, <span class='no'>ARM</span>), <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"USUBJID"</span>, <span class='st'>"STUDYID"</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='var_relabel.html'>var_relabel</a></span>(
    <span class='kw'>AEBODSYS</span> <span class='kw'>=</span> <span class='st'>'MedDRA System Organ Class'</span>,
    <span class='kw'>AEDECOD</span> <span class='kw'>=</span> <span class='st'>'MedDRA Preferred Term'</span>,
    <span class='kw'>AETOXGR</span> <span class='kw'>=</span> <span class='st'>'GRADE'</span>
)

<span class='fu'>t_events_per_term_grade_id</span>(
  <span class='kw'>terms</span> <span class='kw'>=</span> <span class='no'>ANL</span>$<span class='no'>AEDECOD</span>,
  <span class='kw'>id</span> <span class='kw'>=</span> <span class='no'>ANL</span>$<span class='no'>USUBJID</span>,
  <span class='kw'>grade</span> <span class='kw'>=</span> <span class='no'>ANL</span>$<span class='no'>AETOXGR</span>,
  <span class='kw'>col_by</span> <span class='kw'>=</span> <span class='no'>ANL</span>$<span class='no'>ARM</span>,
  <span class='kw'>col_N</span> <span class='kw'>=</span> <span class='fu'>table</span>(<span class='no'>ASL</span>$<span class='no'>ARM</span>),
  <span class='kw'>total</span> <span class='kw'>=</span> <span class='st'>"All Patients"</span>,
  <span class='kw'>grade_levels</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span>
)</div><div class='output co'>#&gt;                                                      A: Drug X             B: Placebo          C: Combination         All Patients 
#&gt; MedDRA Preferred Term                                  (N=1)                 (N=4)                 (N=5)                 (N=10)    
#&gt; -----------------------------------------------------------------------------------------------------------------------------------
#&gt; - Overall -                  - Any Grade -            1 (100%)              2 (50%)               4 (80%)               7 (70%)    
#&gt;                                    1                     0                     0                     0                     0       
#&gt;                                    2                     0                  1 (25%)                  0                  1 (10%)    
#&gt;                                    3                     0                     0                     0                     0       
#&gt;                                    4                     0                  1 (25%)               1 (20%)               2 (20%)    
#&gt;                                    5                  1 (100%)                 0                  3 (60%)               4 (40%)    
#&gt; 
#&gt; trm B_1/3                    - Any Grade -            1 (100%)                 0                  3 (60%)               4 (40%)    
#&gt;                                    1                     0                     0                     0                     0       
#&gt;                                    2                     0                     0                     0                     0       
#&gt;                                    3                     0                     0                     0                     0       
#&gt;                                    4                     0                     0                     0                     0       
#&gt;                                    5                  1 (100%)                 0                  3 (60%)               4 (40%)    
#&gt; 
#&gt; trm C_1/1                    - Any Grade -               0                  1 (25%)               3 (60%)               4 (40%)    
#&gt;                                    1                     0                     0                     0                     0       
#&gt;                                    2                     0                     0                     0                     0       
#&gt;                                    3                     0                     0                     0                     0       
#&gt;                                    4                     0                  1 (25%)               3 (60%)               4 (40%)    
#&gt;                                    5                     0                     0                     0                     0       
#&gt; 
#&gt; trm A_1/2                    - Any Grade -               0                     0                  2 (40%)               2 (20%)    
#&gt;                                    1                     0                     0                  2 (40%)               2 (20%)    
#&gt;                                    2                     0                     0                     0                     0       
#&gt;                                    3                     0                     0                     0                     0       
#&gt;                                    4                     0                     0                     0                     0       
#&gt;                                    5                     0                     0                     0                     0       
#&gt; 
#&gt; trm A_2/2                    - Any Grade -               0                  2 (50%)                  0                  2 (20%)    
#&gt;                                    1                     0                     0                     0                     0       
#&gt;                                    2                     0                  2 (50%)                  0                  2 (20%)    
#&gt;                                    3                     0                     0                     0                     0       
#&gt;                                    4                     0                     0                     0                     0       
#&gt;                                    5                     0                     0                     0                     0       
#&gt; 
#&gt; trm B_2/3                    - Any Grade -               0                  1 (25%)               1 (20%)               2 (20%)    
#&gt;                                    1                     0                     0                     0                     0       
#&gt;                                    2                     0                     0                     0                     0       
#&gt;                                    3                     0                  1 (25%)               1 (20%)               2 (20%)    
#&gt;                                    4                     0                     0                     0                     0       
#&gt;                                    5                     0                     0                     0                     0       
#&gt; 
#&gt; trm B_3/3                    - Any Grade -               0                  1 (25%)                  0                  1 (10%)    
#&gt;                                    1                     0                  1 (25%)                  0                  1 (10%)    
#&gt;                                    2                     0                     0                     0                     0       
#&gt;                                    3                     0                     0                     0                     0       
#&gt;                                    4                     0                     0                     0                     0       
#&gt;                                    5                     0                     0                     0                     0       </div><div class='input'>
<span class='fu'>t_events_per_term_grade_id</span>(
  <span class='kw'>terms</span> <span class='kw'>=</span> <span class='no'>ANL</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/select.html'>select</a></span>(<span class='no'>AEBODSYS</span>, <span class='no'>AEDECOD</span>),
  <span class='kw'>id</span> <span class='kw'>=</span> <span class='no'>ANL</span>$<span class='no'>USUBJID</span>,
  <span class='kw'>grade</span> <span class='kw'>=</span> <span class='no'>ANL</span>$<span class='no'>AETOXGR</span>,
  <span class='kw'>col_by</span> <span class='kw'>=</span> <span class='no'>ANL</span>$<span class='no'>ARM</span>,
  <span class='kw'>col_N</span> <span class='kw'>=</span> <span class='fu'>table</span>(<span class='no'>ASL</span>$<span class='no'>ARM</span>),
  <span class='kw'>total</span> <span class='kw'>=</span> <span class='st'>"All Patients"</span>,
  <span class='kw'>grade_levels</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span>
)</div><div class='output co'>#&gt; MedDRA System Organ Class                                A: Drug X             B: Placebo          C: Combination         All Patients 
#&gt;   MedDRA Preferred Term              GRADE                 (N=1)                 (N=4)                 (N=5)                 (N=10)    
#&gt; ---------------------------------------------------------------------------------------------------------------------------------------
#&gt; - Any adverse events -
#&gt;   - Overall -                    - Any Grade -            1 (100%)              2 (50%)               4 (80%)               7 (70%)    
#&gt;                                        1                     0                     0                     0                     0       
#&gt;                                        2                     0                  1 (25%)                  0                  1 (10%)    
#&gt;                                        3                     0                     0                     0                     0       
#&gt;                                        4                     0                  1 (25%)               1 (20%)               2 (20%)    
#&gt;                                        5                  1 (100%)                 0                  3 (60%)               4 (40%)    
#&gt; 
#&gt; cl B
#&gt;   - Overall -                    - Any Grade -            1 (100%)              2 (50%)               3 (60%)               6 (60%)    
#&gt;                                        1                     0                  1 (25%)                  0                  1 (10%)    
#&gt;                                        2                     0                     0                     0                     0       
#&gt;                                        3                     0                  1 (25%)                  0                  1 (10%)    
#&gt;                                        4                     0                     0                     0                     0       
#&gt;                                        5                  1 (100%)                 0                  3 (60%)               4 (40%)    
#&gt; 
#&gt;   trm B_1/3                      - Any Grade -            1 (100%)                 0                  3 (60%)               4 (40%)    
#&gt;                                        1                     0                     0                     0                     0       
#&gt;                                        2                     0                     0                     0                     0       
#&gt;                                        3                     0                     0                     0                     0       
#&gt;                                        4                     0                     0                     0                     0       
#&gt;                                        5                  1 (100%)                 0                  3 (60%)               4 (40%)    
#&gt; 
#&gt;   trm B_2/3                      - Any Grade -               0                  1 (25%)               1 (20%)               2 (20%)    
#&gt;                                        1                     0                     0                     0                     0       
#&gt;                                        2                     0                     0                     0                     0       
#&gt;                                        3                     0                  1 (25%)               1 (20%)               2 (20%)    
#&gt;                                        4                     0                     0                     0                     0       
#&gt;                                        5                     0                     0                     0                     0       
#&gt; 
#&gt;   trm B_3/3                      - Any Grade -               0                  1 (25%)                  0                  1 (10%)    
#&gt;                                        1                     0                  1 (25%)                  0                  1 (10%)    
#&gt;                                        2                     0                     0                     0                     0       
#&gt;                                        3                     0                     0                     0                     0       
#&gt;                                        4                     0                     0                     0                     0       
#&gt;                                        5                     0                     0                     0                     0       
#&gt; 
#&gt; cl A
#&gt;   - Overall -                    - Any Grade -               0                  2 (50%)               2 (40%)               4 (40%)    
#&gt;                                        1                     0                     0                  2 (40%)               2 (20%)    
#&gt;                                        2                     0                  2 (50%)                  0                  2 (20%)    
#&gt;                                        3                     0                     0                     0                     0       
#&gt;                                        4                     0                     0                     0                     0       
#&gt;                                        5                     0                     0                     0                     0       
#&gt; 
#&gt;   trm A_1/2                      - Any Grade -               0                     0                  2 (40%)               2 (20%)    
#&gt;                                        1                     0                     0                  2 (40%)               2 (20%)    
#&gt;                                        2                     0                     0                     0                     0       
#&gt;                                        3                     0                     0                     0                     0       
#&gt;                                        4                     0                     0                     0                     0       
#&gt;                                        5                     0                     0                     0                     0       
#&gt; 
#&gt;   trm A_2/2                      - Any Grade -               0                  2 (50%)                  0                  2 (20%)    
#&gt;                                        1                     0                     0                     0                     0       
#&gt;                                        2                     0                  2 (50%)                  0                  2 (20%)    
#&gt;                                        3                     0                     0                     0                     0       
#&gt;                                        4                     0                     0                     0                     0       
#&gt;                                        5                     0                     0                     0                     0       
#&gt; 
#&gt; cl C
#&gt;   - Overall -                    - Any Grade -               0                  1 (25%)               3 (60%)               4 (40%)    
#&gt;                                        1                     0                     0                     0                     0       
#&gt;                                        2                     0                     0                     0                     0       
#&gt;                                        3                     0                     0                     0                     0       
#&gt;                                        4                     0                  1 (25%)               3 (60%)               4 (40%)    
#&gt;                                        5                     0                     0                     0                     0       
#&gt; 
#&gt;   trm C_1/1                      - Any Grade -               0                  1 (25%)               3 (60%)               4 (40%)    
#&gt;                                        1                     0                     0                     0                     0       
#&gt;                                        2                     0                     0                     0                     0       
#&gt;                                        3                     0                     0                     0                     0       
#&gt;                                        4                     0                  1 (25%)               3 (60%)               4 (40%)    
#&gt;                                        5                     0                     0                     0                     0       </div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Edgar Manukyan (manukyae) <a href='mailto:edgar.manukyan@roche.com'>edgar.manukyan@roche.com</a>

Adrian Waddell (waddella) <a href='mailto:adrian.waddell@roche.com'>adrian.waddell@roche.com</a>

Carolyn Zhang (zhanc107) <a href='mailto:carolyn.zhang@duke.edu'>carolyn.zhang@duke.edu</a>

Heng Wang (wangh107) <a href='mailto:wang.heng@gene.com'>wang.heng@gene.com</a>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Adrian Waddell, Heng Wang, Yuyao Song, Chendi Liao, Edgar Manukyan, Mark Rothe, Xiao Mu Yo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

