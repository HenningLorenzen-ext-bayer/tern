<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Mix model with repeated measurements (MMRM) model — t_mmrm • tern</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Mix model with repeated measurements (MMRM) model — t_mmrm" />
<meta property="og:description" content="The MMRM table function summarizes MMRM test results by visit and groups. The
function produces adjusted lsmeans and standard error, as well as conducts
comparisons between groups' adjusted means, where the first level of the group
is the reference level." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tern</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/missing-data.html">Missing Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<!-- start_releases -->
<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
Other releases
<span class="caret"></span></a><ul class="dropdown-menu" role="menu">
   <li><a href="../../index.html">latest</a></li>
   <li><a href="../../v0.7.4/index.html">v0.7.4</a></li>
   <li><a href="../../v0.7.3/index.html">v0.7.3</a></li>
   <li><a href="../../v0.7.1/index.html">v0.7.1</a></li>
   <li><a href="../../v0.7.0/index.html">v0.7.0</a></li>
   <li><a href="../../v0.6.9/index.html">v0.6.9</a></li>
   <li><a href="../../v0.6.8/index.html">v0.6.8</a></li>
   <li><a href="../../v0.6.7/index.html">v0.6.7</a></li>
   <li><a href="../../v0.6.6/index.html">v0.6.6</a></li>
   <li><a href="../../v0.6.5/index.html">v0.6.5</a></li>
   <li><a href="../../v0.6.4/index.html">v0.6.4</a></li>
   <li><a href="../../v0.6.2/index.html">v0.6.2</a></li>
   <li><a href="../../v0.6.1/index.html">v0.6.1</a></li>
   <li><a href="../../v0.6.0/index.html">v0.6.0</a></li>
   <li><a href="../../v0.5.0/index.html">v0.5.0</a></li>
</ul></li>
<!-- end_releases -->
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.roche.com/NEST/tern">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Mix model with repeated measurements (MMRM) model</h1>
    
    <div class="hidden name"><code>t_mmrm.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The MMRM table function summarizes MMRM test results by visit and groups. The
function produces adjusted <code>lsmeans</code> and standard error, as well as conducts
comparisons between groups' adjusted means, where the first level of the group
is the reference level.</p>
    </div>

    <pre class="usage"><span class='fu'>t_mmrm</span>(
  <span class='kw'>formula</span> <span class='kw'>=</span> <span class='no'>AVAL</span> ~ <span class='fu'><a href='arm.html'>arm</a></span>(<span class='no'>ARM</span>) + <span class='fu'>visit</span>(<span class='no'>AVISIT</span>) + <span class='no'>ARM</span> * <span class='no'>VISIT</span>,
  <span class='no'>data</span>,
  <span class='kw'>id_var</span> <span class='kw'>=</span> <span class='st'>"USUBJID"</span>,
  <span class='kw'>arm_var</span> <span class='kw'>=</span> <span class='st'>"ARM"</span>,
  <span class='kw'>visit_var</span> <span class='kw'>=</span> <span class='st'>"AVISIT"</span>,
  <span class='no'>col_N</span>,
  <span class='kw'>mode</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"df.error"</span>, <span class='st'>"auto"</span>, <span class='st'>"boot-satterthwaite"</span>),
  <span class='kw'>conf_level</span> <span class='kw'>=</span> <span class='fl'>0.95</span>,
  <span class='kw'>weights_emmeans</span> <span class='kw'>=</span> <span class='st'>"proportional"</span>,
  <span class='kw'>corStruct</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>table_tree</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>a <code>gls</code> formula.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>a <code>data.frame</code> with all the variables specified in
<code>formula</code>. Records with missing values in any independent variables
will be excluded.</p></td>
    </tr>
    <tr>
      <th>id_var</th>
      <td><p>a character describing the variable name used as subject IDs,
<code>"USUBJID"</code> by default.</p></td>
    </tr>
    <tr>
      <th>arm_var</th>
      <td><p>a character describing the variable name for <code><a href='arm.html'>arm</a></code>,
<code>"ARM"</code> by default. The arm variable must be factor in <code>data</code></p></td>
    </tr>
    <tr>
      <th>visit_var</th>
      <td><p>a character describing the variable name for visit,
<code>"AVISIT"</code> by default. This variable must be factor in data.</p></td>
    </tr>
    <tr>
      <th>col_N</th>
      <td><p>(<code>integer</code> vector)<br />
Contains the reference population per level of <code>col_by</code>. This by default is often
set to <code><a href='get_N.html'>get_N(col_by)</a></code>. Names of the list are ignored, they are added in the order they appear.
The default may not appropriate and should be modified by the user when <code>col_by</code> contains
more than one record per subject.</p></td>
    </tr>
    <tr>
      <th>mode</th>
      <td><p>algorithm for degree of freedom: <code>auto</code>, <code>df.error</code> or
<code>boot-satterthwaite</code>.</p></td>
    </tr>
    <tr>
      <th>conf_level</th>
      <td><p>confidence level. Must be number greater than 0 and less
than 1.</p></td>
    </tr>
    <tr>
      <th>weights_emmeans</th>
      <td><p>argument from <code><a href='https://rdrr.io/pkg/emmeans/man/emmeans.html'>emmeans</a></code>, "proportional" by default.</p></td>
    </tr>
    <tr>
      <th>corStruct</th>
      <td><p><code>NULL</code> by default or a string with the name of <code><a href='https://rdrr.io/pkg/nlme/man/corClasses.html'>corClasses</a></code>.</p></td>
    </tr>
    <tr>
      <th>table_tree</th>
      <td><p>(<code>logical</code> value)<br />
If <code>FALSE</code> then a single <code>rtable</code> gets returned, if <code>TRUE</code> a
<code><a href='node-class.html'>node</a></code> object gets returned with the elementary <code>rtable</code> objects.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>rtable</code> object or table tree, depending on the the `table_tree` argument</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Create <code>rtable</code> of MMRM test results</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='a_mmrm.html'>a_mmrm</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>dplyr</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>random.cdisc.data</span>)

<span class='no'>ADSL</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/random.cdisc.data/man/radsl.html'>radsl</a></span>(<span class='kw'>cached</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>ADQS</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/random.cdisc.data/man/radqs.html'>radqs</a></span>(<span class='kw'>cached</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>ADQS_f</span> <span class='kw'>&lt;-</span> <span class='no'>ADQS</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>PARAMCD</span><span class='kw'>==</span><span class='st'>"FKSI-FWB"</span> <span class='kw'>&amp;</span> !<span class='no'>AVISIT</span> <span class='kw'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"BASELINE"</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/base/droplevels.html'>droplevels</a></span>() <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>ARM</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>ARM</span>, <span class='kw'>levels</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"B: Placebo"</span>, <span class='st'>"A: Drug X"</span>, <span class='st'>"C: Combination"</span>))) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>AVISITN</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rank.html'>rank</a></span>(<span class='no'>AVISITN</span>) <span class='kw'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span>() <span class='kw'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span>() <span class='kw'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span>())

<span class='fu'>t_mmrm</span>(<span class='kw'>formula</span> <span class='kw'>=</span> <span class='no'>AVAL</span> ~ <span class='no'>ARM</span> + <span class='no'>AVISIT</span> + <span class='no'>STRATA1</span> + <span class='no'>BMRKR2</span> + <span class='no'>ARM</span>*<span class='no'>AVISIT</span>,
       <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ADQS_f</span>,
       <span class='kw'>id_var</span> <span class='kw'>=</span> <span class='st'>"USUBJID"</span>,
       <span class='kw'>arm_var</span> <span class='kw'>=</span> <span class='st'>"ARM"</span>,
       <span class='kw'>visit_var</span> <span class='kw'>=</span> <span class='st'>"AVISIT"</span>,
       <span class='kw'>col_N</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span>(<span class='no'>ADSL</span>$<span class='no'>ARM</span>),
       <span class='kw'>mode</span> <span class='kw'>=</span> <span class='st'>"boot-satterthwaite"</span>,
       <span class='kw'>conf_level</span> <span class='kw'>=</span> <span class='fl'>0.95</span>,
       <span class='kw'>weights_emmeans</span> <span class='kw'>=</span> <span class='st'>"proportional"</span>,
       <span class='kw'>corStruct</span> <span class='kw'>=</span> <span class='st'>"corSymm"</span>,
       <span class='kw'>table_tree</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</div><div class='output co'>#&gt; <span class='message'>MMRM methodology in R is different from SAS. Please use as exploratory purpose.</span></div><div class='output co'>#&gt;                                                                B: Placebo              A: Drug X             C: Combination 
#&gt;                                                                 (N=134)                 (N=134)                 (N=132)     
#&gt; ----------------------------------------------------------------------------------------------------------------------------
#&gt; SCREENING
#&gt;   n                                                               134                     134                     132       
#&gt;   Adjusted Mean (SE)                                         45.190 (0.738)          44.578 (0.737)          44.733 (0.743) 
#&gt;   95% CI                                                    (43.743, 46.637)        (43.133, 46.024)        (43.277, 46.19) 
#&gt; 
#&gt;   Difference in Adjusted Means (SE) (vs. B: Placebo)                                 -0.611 (1.044)          -0.457 (1.048) 
#&gt;   95% CI                                                                            (-2.659, 1.436)         (-2.511, 1.597) 
#&gt;   Relative Reduction (%)                                                                  1.4%                     1%       
#&gt; 
#&gt;   p-value (MMRM)                                                                         0.5581                  0.6628     
#&gt; 
#&gt; WEEK 1 DAY 8
#&gt;   n                                                               134                     134                     132       
#&gt;   Adjusted Mean (SE)                                         54.306 (0.689)          55.032 (0.688)          53.974 (0.693) 
#&gt;   95% CI                                                    (52.956, 55.657)        (53.682, 56.382)        (52.614, 55.333)
#&gt; 
#&gt;   Difference in Adjusted Means (SE) (vs. B: Placebo)                                 0.725 (0.975)           -0.333 (0.978) 
#&gt;   95% CI                                                                            (-1.186, 2.637)         (-2.251, 1.585) 
#&gt;   Relative Reduction (%)                                                                 -1.3%                    0.6%      
#&gt; 
#&gt;   p-value (MMRM)                                                                         0.4568                  0.7338     
#&gt; 
#&gt; WEEK 2 DAY 15
#&gt;   n                                                               134                     134                     132       
#&gt;   Adjusted Mean (SE)                                         59.954 (0.766)          59.804 (0.765)          59.320 (0.771) 
#&gt;   95% CI                                                    (58.452, 61.455)        (58.303, 61.305)        (57.809, 60.832)
#&gt; 
#&gt;   Difference in Adjusted Means (SE) (vs. B: Placebo)                                 -0.150 (1.083)          -0.633 (1.087) 
#&gt;   95% CI                                                                            (-2.274, 1.975)         (-2.765, 1.499) 
#&gt;   Relative Reduction (%)                                                                  0.2%                    1.1%      
#&gt; 
#&gt;   p-value (MMRM)                                                                          0.89                   0.5603     
#&gt; 
#&gt; WEEK 3 DAY 22
#&gt;   n                                                               134                     134                     132       
#&gt;   Adjusted Mean (SE)                                         64.366 (0.870)          66.799 (0.870)          66.600 (0.876) 
#&gt;   95% CI                                                    (62.659, 66.072)        (65.094, 68.505)        (64.882, 68.318)
#&gt; 
#&gt;   Difference in Adjusted Means (SE) (vs. B: Placebo)                                 2.434 (1.231)           2.235 (1.235)  
#&gt;   95% CI                                                                             (0.02, 4.848)          (-0.188, 4.657) 
#&gt;   Relative Reduction (%)                                                                 -3.8%                   -3.5%      
#&gt; 
#&gt;   p-value (MMRM)                                                                         0.0481                  0.0706     
#&gt; 
#&gt; WEEK 4 DAY 29
#&gt;   n                                                               134                     134                     132       
#&gt;   Adjusted Mean (SE)                                         68.921 (0.994)          70.264 (0.994)          70.322 (1.001) 
#&gt;   95% CI                                                    (66.972, 70.87)         (68.316, 72.213)        (68.359, 72.285)
#&gt; 
#&gt;   Difference in Adjusted Means (SE) (vs. B: Placebo)                                 1.343 (1.406)           1.401 (1.411)  
#&gt;   95% CI                                                                            (-1.414, 4.101)         (-1.366, 4.168) 
#&gt;   Relative Reduction (%)                                                                 -1.9%                    -2%       
#&gt; 
#&gt;   p-value (MMRM)                                                                         0.3395                  0.3209     
#&gt; 
#&gt; WEEK 5 DAY 36
#&gt;   n                                                               134                     134                     132       
#&gt;   Adjusted Mean (SE)                                         74.322 (1.057)          75.716 (1.057)          74.515 (1.065) 
#&gt;   95% CI                                                    (72.249, 76.395)        (73.644, 77.789)        (72.427, 76.603)
#&gt; 
#&gt;   Difference in Adjusted Means (SE) (vs. B: Placebo)                                 1.394 (1.495)           0.193 (1.501)  
#&gt;   95% CI                                                                            (-1.538, 4.327)          (-2.75, 3.136) 
#&gt;   Relative Reduction (%)                                                                 -1.9%                   -0.3%      
#&gt; 
#&gt;   p-value (MMRM)                                                                         0.3512                  0.8977     </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by NEST, Roche, Adrian Waddell, Maximilian Mordig, Heng Wang, Jennifer Li, Yuyao Song, Chendi Liao, Jana Stoilova, Edgar Manukyan, Ting Qi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


