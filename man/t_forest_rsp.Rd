% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/t_forest_rsp.R
\name{t_forest_rsp}
\alias{t_forest_rsp}
\title{Response Table as used for Forest Plot}
\usage{
t_forest_rsp(rsp, col_by, row_by_list = NULL, total = "ALL",
  dense_header = FALSE, table_tree = FALSE)
}
\arguments{
\item{rsp}{boolean vector, \code{TRUE} if subject is a responder \code{FALSE}
otherwise}

\item{col_by}{logical factor or data.frame with reference and comparison group information, the
first \code{level} indicates the reference group. See the functions \code{factor_to_matrix_by}
and \code{add_total_by}.}

\item{row_by_list}{\code{list} or \code{data.frame} with one factor variable to calculate
the \code{t_el_forest_tte}}

\item{total}{string of total row added. If \code{NULL} then no total row is added.}

\item{dense_header}{Display the table headers in multiple rows.}

\item{table_tree}{logical, if \code{FALSE} then a single \code{rtable} gets returned, if \code{TRUE} a
\code{\link{node}} object gets returned with the elementary \code{rtable} objects.}
}
\value{
an \code{\link[rtables]{rtable}} object
}
\description{
The Response forest plot table summarizes response data by groups. The
function returns sample sizes and responder counts and response rates for
each analysis arm, as well as a odds ratio and the corresponding 95\%
confidence interval from a univariate logistic model.
}
\details{
Logistic regression is used for odds ratio calculation.

Each row in the returned table contains the analysis statistics for a
subgroup of data (indicated by the row name). The summary table is consist of
the following 9 columns:

\describe{

  \item{1}{\emph{Total n} the total number of subjects included in analysis
  population}

  \item{3-4}{Summary of responders in reference arm, \emph{n} and
  \emph{Responders} are the total number of patients and the number of
  responders in reference arm, respectively. \code{Response.Rate} is the
  percentage of responders in reference arm.}

  \item{5-7}{same statistics as for reference arm now for comparison arm}

  \item{8}{\emph{Odds Ratio} ranges from 0 to infinity, estimated by applying
  univariate logistic regression. Binary response status (responder or
  non-responder) is the outcome and arm is the explanatory variable. Odds
  ratio greater than 1 indicates better performance in comparison arm; odds
  ratio less than 1 indicates better performance in reference arm.}

  \item{9}{\emph{95 \% CI} The 95% confidence interval indicates the level of
  uncertainty around the measure of effect (Odds Ratio). Because only a small
  sample of the overall population is included in the analysis, by having an
  upper and lower confidence limit we can infer that the true treatment
  effect lies in between. If the 95% confidence interval includes 1, then we
  say that the difference between two arms is not significant at a
  significance level of 0.05.}

}
}
\examples{
library(random.cdisc.data)
library(dplyr)
library(purrr)

ADSL <- radsl(seed = 1)
ADSL$'FAKE Name > -1.3 Flag' <- rep(c('Y', 'N'), 50)
attr(ADSL$'FAKE Name > -1.3 Flag', "label") <- "dummy"

ADRS <- radrs(ADSL, seed = 2)
ADRS_f <- subset(ADRS, PARAMCD == "BESRSPI") \%>\%
  dplyr::filter(ARM != 'C: Combination') \%>\%
  mutate(ARM = droplevels(ARM))

tbl <- t_forest_rsp(
  rsp = ADRS_f$AVALC \%in\% c("CR", "PR"),
  col_by = as_factor_keep_attributes(ADRS_f$ARM),
  row_by_list = ADRS_f[, c("SEX", "RACE", "FAKE Name > -1.3 Flag")] \%>\%
    map(as_factor_keep_attributes)
)

tbl

\dontrun{
Viewer(tbl)
}


# table tree
tbls <- t_forest_rsp(
  rsp = ADRS_f$AVALC \%in\% c("CR", "PR"),
  col_by = ADRS_f$ARM,
  row_by_list = ADRS_f[, c("SEX", "RACE", "FAKE Name > -1.3 Flag")] \%>\%
    map(as_factor_keep_attributes),
  table_tree = TRUE
)
summary(tbls)

# todo: remove as_factor_keep_attributes above
}
\seealso{
\code{\link{t_el_forest_rsp}}, \code{\link{t_rsp}}
}
\author{
Yuyao Song (songy24) \email{yuyao.song@roche.com}
}
